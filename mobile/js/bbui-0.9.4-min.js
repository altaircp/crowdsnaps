bb={scroller:null,screens:[],dropdownScrollers:[],transparentPixel:"data:image/png;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",imageList:null,activityIndicator:null,fileInput:null,button:null,scrollPanel:null,bbmBubble:null,dropdown:null,textInput:null,roundPanel:null,grid:null,pillButtons:null,labelControlContainers:null,slider:null,radio:null,progress:null,checkbox:null,toggle:null,init:function(a){if(a){for(var c in a){bb.options[c]=a[c]}}if(window.blackberry&&blackberry.system&&blackberry.system.event&&blackberry.system.event.onHardwareKey){if(bb.options.onbackkey){blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK,bb.options.onbackkey)}else{blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK,bb.popScreen)}}bb.device.isRipple=(navigator.userAgent.indexOf("Ripple")>=0);bb.device.isPlayBook=(navigator.userAgent.indexOf("PlayBook")>=0)||((window.innerWidth==1024&&window.innerHeight==600)||(window.innerWidth==600&&window.innerHeight==1024));if(bb.device.isPlayBook&&bb.options.bb10ForPlayBook){bb.device.isBB10=true}else{bb.device.isBB10=(navigator.userAgent.indexOf("Version/10.0")>=0)}bb.device.isBB7=(navigator.userAgent.indexOf("7.0.0")>=0)||(navigator.userAgent.indexOf("7.1.0")>=0)||bb.device.isRipple;bb.device.isBB6=navigator.userAgent.indexOf("6.0.0")>=0;bb.device.isBB5=navigator.userAgent.indexOf("5.0.0")>=0;if(bb.device.isRipple){bb.device.isHiRes=window.innerHeight>480||window.innerWidth>480}else{bb.device.isHiRes=screen.width>480||screen.height>480}var f=document.createElement("meta");f.setAttribute("name","viewport");if(navigator.userAgent.indexOf("Version/10.0.9")>=0){f.setAttribute("content","initial-scale="+(1/window.devicePixelRatio)+",user-scalable=no")}else{f.setAttribute("content","initial-scale=1.0,width=device-width,user-scalable=no,target-densitydpi=device-dpi")}document.head.appendChild(f);var e=parseInt((bb.cutHex(bb.options.highlightColor)).substring(0,2),16),d=parseInt((bb.cutHex(bb.options.highlightColor)).substring(2,4),16),g=parseInt((bb.cutHex(bb.options.highlightColor)).substring(4,6),16);bb.options.shades={R:e,G:d,B:g,darkHighlight:"rgb("+(e-120)+", "+(d-120)+", "+(g-120)+")",darkOutline:"rgb("+(e-32)+", "+(d-32)+", "+(g-32)+")"};if(document.styleSheets&&document.styleSheets.length){try{document.styleSheets[0].insertRule(".bb10Highlight {background-color:"+bb.options.highlightColor+";background-image:none;}",0);document.styleSheets[0].insertRule(".bbProgressHighlight {background-color:#92B43B;background-image:none;}",0);document.styleSheets[0].insertRule(".bb10-button-highlight {color:White;background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.shades.darkHighlight+"), to("+bb.options.highlightColor+"));border-color:#53514F;}",0);document.styleSheets[0].insertRule(".pb-button-light-highlight {color:"+bb.options.shades.darkHighlight+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0);document.styleSheets[0].insertRule(".pb-button-dark-highlight {color:"+bb.options.highlightColor+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0);document.styleSheets[0].insertRule(".bb10Accent {background-color:"+bb.options.shades.darkHighlight+";}",0)}catch(b){console.log(b.message)}}bb.actionBar.color=(bb.options.actionBarDark)?"dark":"light";bb.screen.controlColor=(bb.options.controlsDark)?"dark":"light";bb.screen.listColor=(bb.options.listsDark)?"dark":"light";if(bb.device.isBB10){bb.imageList=_bb10_imageList;bb.activityIndicator=_bb10_activityIndicator;bb.fileInput=_bb10_fileInput;bb.button=_bb10_button;bb.scrollPanel=_bb_PlayBook_10_scrollPanel;bb.bbmBubble=_bb_bbmBubble;bb.dropdown=_bb10_dropdown;bb.textInput=_bb10_textInput;bb.roundPanel=_bb10_roundPanel;bb.grid=_bb10_grid;bb.pillButtons=_bb10_pillButtons;bb.labelControlContainers=_bb10_labelControlContainers;bb.slider=_bb10_slider;bb.radio=_bb10_radio;bb.progress=_bb_progress;bb.checkbox=_bb10_checkbox;bb.toggle=_bb10_toggle}else{if(bb.device.isBB5){bb.imageList=_bb_5_6_7_imageList;bb.button=_bb5_button;bb.bbmBubble=_bb_bbmBubble;bb.roundPanel=_bb_5_6_7_roundPanel;bb.pillButtons=_bb5_pillButtons;bb.labelControlContainers=_bb5_labelControlContainers;bb.progress=_bb_progress}else{if(bb.device.isPlayBook){bb.imageList=_bbPlayBook_imageList;bb.button=_bbPlayBook_button;bb.bbmBubble=_bb_bbmBubble;bb.dropdown=_bb_6_7_PlayBook_dropdown;bb.textInput=_bbPlayBook_textInput;bb.pillButtons=_bb_6_7_PlayBook_pillButtons;bb.labelControlContainers=_bb_6_7_PlayBook_labelControlContainers;bb.progress=_bb_progress;bb.scrollPanel=_bb_PlayBook_10_scrollPanel;bb.roundPanel=_bbPlayBook_roundPanel;bb.activityIndicator=_bbPlayBook_activityIndicator}else{bb.imageList=_bb_5_6_7_imageList;bb.button=_bb_6_7_button;bb.bbmBubble=_bb_bbmBubble;bb.dropdown=_bb_6_7_PlayBook_dropdown;bb.textInput=_bb_6_7_textInput;bb.pillButtons=_bb_6_7_PlayBook_pillButtons;bb.labelControlContainers=_bb_6_7_PlayBook_labelControlContainers;bb.progress=_bb_progress;bb.roundPanel=_bb_5_6_7_roundPanel}}}},doLoad:function(b){var a=b||document.body;bb.screen.apply(a.querySelectorAll("[data-bb-type=screen]"));if(bb.scrollPanel){bb.scrollPanel.apply(a.querySelectorAll("[data-bb-type=scroll-panel]"))}if(bb.textInput){bb.textInput.apply(a.querySelectorAll("input[type=text], [type=password], [type=tel], [type=url], [type=email], [type=number], [type=date], [type=time], [type=datetime], [type=month], [type=datetime-local], [type=color], [type=search]"))}if(bb.dropdown){bb.dropdown.apply(a.querySelectorAll("select"))}if(bb.roundPanel){bb.roundPanel.apply(a.querySelectorAll("[data-bb-type=round-panel]"))}if(bb.imageList){bb.imageList.apply(a.querySelectorAll("[data-bb-type=image-list]"))}if(bb.grid){bb.grid.apply(a.querySelectorAll("[data-bb-type=grid-layout]"))}if(bb.bbmBubble){bb.bbmBubble.apply(a.querySelectorAll("[data-bb-type=bbm-bubble]"))}if(bb.pillButtons){bb.pillButtons.apply(a.querySelectorAll("[data-bb-type=pill-buttons]"))}if(bb.labelControlContainers){bb.labelControlContainers.apply(a.querySelectorAll("[data-bb-type=label-control-container]"))}if(bb.button){bb.button.apply(a.querySelectorAll("[data-bb-type=button]"))}if(bb.fileInput){bb.fileInput.apply(a.querySelectorAll("input[type=file]"))}if(bb.slider){bb.slider.apply(a.querySelectorAll("input[type=range]"))}if(bb.progress){bb.progress.apply(a.querySelectorAll("progress"))}if(bb.radio){bb.radio.apply(a.querySelectorAll("input[type=radio]"))}if(bb.activityIndicator){bb.activityIndicator.apply(a.querySelectorAll("[data-bb-type=activity-indicator]"))}if(bb.checkbox){bb.checkbox.apply(a.querySelectorAll("input[type=checkbox]"))}if(bb.toggle){bb.toggle.apply(a.querySelectorAll("[data-bb-type=toggle]"))}bb.screen.reAdjustHeight()},device:{isHiRes:false,isBB5:false,isBB6:false,isBB7:false,isBB10:false,isPlayBook:false,isRipple:false},options:{onbackkey:null,onscreenready:null,ondomready:null,actionBarDark:true,controlsDark:false,listsDark:false,highlightColor:"#00A8DF",bb10ForPlayBook:false},loadScreen:function(url,id,popping,guid,params,screenRecord){var xhr=new XMLHttpRequest(),container=document.createElement("div"),_reduce=function(nl,func,start){var result=start;Array.prototype.forEach.apply(nl,[function(v){result=func(result,v)}]);return result},whereScript=function(result,el){if(el.nodeName==="SCRIPT"){result.push(el)}return _reduce(el.childNodes,whereScript,result)},i,scripts=[],newScriptTags=[];xhr.open("GET",url,false);xhr.send();container.setAttribute("id",guid);container.innerHTML=xhr.responseText;scripts=_reduce(container.childNodes,whereScript,[]);container.scriptIds=[];if(screenRecord){screenRecord.scripts=[]}scripts.forEach(function(script){var scriptTag=document.createElement("script");if(script.text){eval(script.text);return}var scriptGuid=bb.guidGenerator();if(screenRecord){screenRecord.scripts.push({id:scriptGuid,onunload:script.getAttribute("onunload")})}else{container.scriptIds.push({id:scriptGuid,onunload:script.getAttribute("onunload")})}scriptTag.setAttribute("type","text/javascript");scriptTag.setAttribute("src",script.getAttribute("src"));scriptTag.setAttribute("id",scriptGuid);newScriptTags.push(scriptTag);script.parentNode.removeChild(script)});container.getElementById=function(id,node){var result=null;if(!node){node=this}if(node.getAttribute("id")==id){return node}for(var i=0;i<node.childNodes.length;i++){var child=node.childNodes[i];if(child.nodeType==1){result=this.getElementById(id,child);if(result){break}}}return result};bb.screen.scriptCounter=0;bb.screen.totalScripts=newScriptTags.length;for(i=0;i<newScriptTags.length;i++){document.body.appendChild(newScriptTags[i]);newScriptTags[i].onload=function(){bb.screen.scriptCounter++;if(bb.screen.scriptCounter==bb.screen.totalScripts){bb.initContainer(container,id,popping,params)}}}if(bb.screen.totalScripts===0){setTimeout(function(){bb.initContainer(container,id,popping,params)},0)}return container},initContainer:function(a,b,j,e){if(bb.options.onscreenready){bb.options.onscreenready(a,b,e)}bb.doLoad(a);document.body.appendChild(a);var k=a.querySelectorAll("[data-bb-type=screen]"),g,m,l=null,f;if(k.length>0){k=k[0];if(j){var c=bb.screens[bb.screens.length-1].container,d;g=c.querySelectorAll("[data-bb-type=screen]")[0];d=g.hasAttribute("data-bb-effect")?g.getAttribute("data-bb-effect"):undefined;if(d){k.style["z-index"]="-100";if(d.toLowerCase()=="fade"){g.setAttribute("data-bb-effect","fade-out")}else{if(d.toLowerCase()=="slide-left"){g.setAttribute("data-bb-effect","slide-out-right")}else{if(d.toLowerCase()=="slide-right"){g.setAttribute("data-bb-effect","slide-out-left")}else{if(d.toLowerCase()=="slide-up"){g.setAttribute("data-bb-effect","slide-out-down")}else{if(d.toLowerCase()=="slide-down"){g.setAttribute("data-bb-effect","slide-out-up")}}}}}}}else{g=k}g.popping=j;if(g.hasAttribute("data-bb-effect")){if(!bb.device.isBB5&&!bb.device.isBB6){m=g.getAttribute("data-bb-effect");if(m){m=m.toLowerCase();if(m=="fade"){l=bb.screen.fadeIn}else{if(m=="fade-out"){l=bb.screen.fadeOut}else{if(!bb.device.isBB7){switch(m){case"slide-left":l=bb.screen.slideLeft;break;case"slide-out-left":l=bb.screen.slideOutLeft;break;case"slide-right":l=bb.screen.slideRight;break;case"slide-out-right":l=bb.screen.slideOutRight;break;case"slide-up":l=bb.screen.slideUp;break;case"slide-out-up":l=bb.screen.slideOutUp;break;case"slide-down":l=bb.screen.slideDown;break;case"slide-out-down":l=bb.screen.slideOutDown;break}}}}g.style.display="inline";if(l){f=document.createElement("div");g.overlay=f;f.setAttribute("class","bb-transition-overlay");document.body.appendChild(f);bb.screen.animating=true;g.doEndAnimation=function(){var n=this.style;bb.screen.animating=false;document.body.removeChild(this.overlay);this.overlay=null;if(bb.screens.length>1){if(!this.popping){bb.removePreviousScreenFromDom();n.left="";n.right="";n.top="";n.bottom="";n.width="";n.height="";n["-webkit-animation-name"]="";n["-webkit-animation-duration"]="";n["-webkit-animation-timing-function"]="";n["-webkit-transform"]=""}else{this.style.display="none";this.parentNode.parentNode.removeChild(this.parentNode);bb.screens.pop();k.style["z-index"]="";bb.screens[bb.screens.length-1].container=a}}this.removeEventListener("webkitAnimationEnd",this.doEndAnimation);bb.createScreenScroller(k)};g.doEndAnimation=g.doEndAnimation.bind(g);g.addEventListener("webkitAnimationEnd",g.doEndAnimation);l.call(this,g)}}}}}if(bb.options.ondomready){bb.domready.container=a;bb.domready.id=b;bb.domready.params=e;setTimeout(bb.domready.fire,1)}if(!l){if(!j){if((bb.device.isBB5||bb.device.isBB6||bb.device.isBB7)&&(bb.screens.length>0)){bb.removePreviousScreenFromDom()}else{if(bb.screens.length>1){bb.removePreviousScreenFromDom()}}}else{if(j){var h=bb.screens[bb.screens.length-1].container;h.parentNode.removeChild(h);bb.screens.pop();bb.screens[bb.screens.length-1].container=a}}bb.createScreenScroller(k)}},domready:{container:null,id:null,params:null,fire:function(){if(bb.screen.animating){setTimeout(bb.domready.fire,250);return}bb.options.ondomready(bb.domready.container,bb.domready.id,bb.domready.params);bb.domready.container=null;bb.domready.id=null;bb.domready.params=null}},createScreenScroller:function(a){var b=a.bbUIscrollWrapper;if(b){if(bb.device.isPlayBook){var c={hideScrollbar:true,fadeScrollbar:true,onBeforeScrollStart:function(g){var f=g.target;if(f.parentNode&&f.parentNode.getAttribute("class")=="bb-bb10-dropdown-items"){return}while(f.nodeType!=1){f=f.parentNode}if(f.tagName!="SELECT"&&f.tagName!="INPUT"&&f.tagName!="TEXTAREA"&&f.tagName!="AUDIO"&&f.tagName!="VIDEO"){g.preventDefault();var d=document.activeElement;if(d){if(d.tagName=="SELECT"||d.tagName=="INPUT"||d.tagName=="TEXTAREA"||d.tagName=="AUDIO"||d.tagName=="VIDEO"){d.blur()}}}},onScrollMove:function(d){if(a.onscroll){a.onscroll(d)}}};bb.scroller=new iScroll(b,c)}else{if(bb.device.isBB10){bb.scroller=null;b.style["-webkit-overflow-scrolling"]="-blackberry-touch";b.onscroll=function(d){if(a.onscroll){a.onscroll(d)}}}}}},clearScrollers:function(){var a;for(var b=bb.dropdownScrollers-1;b>-1;b--){a=bb.dropdownScrollers[b];a.destroy();a=null;bb.dropdownScrollers.pop()}},removeTopMostScreenFromDom:function(){var b=bb.screens.length,a=document.getElementById(bb.screens[b-1].guid);document.body.removeChild(a)},removePreviousScreenFromDom:function(){var b=bb.screens.length,a,c;if(b==1){return}c=(b>1)?2:1;a=document.getElementById(bb.screens[b-c].guid);if(a){document.body.removeChild(a)}},pushScreen:function(d,g,f){bb.removeLoadedScripts();bb.menuBar.clearMenu();var e=bb.screens.length,b;if(e>0){bb.screen.overlay=null;bb.screen.tabOverlay=null;bb.clearScrollers();if(bb.device.isBB5||bb.device.isBB6||bb.device.isBB7){b=document.getElementById(bb.screens[e-1].guid);b.style.display="none";window.scroll(0,0)}}var c=bb.guidGenerator(),a=bb.loadScreen(d,g,false,c,f);bb.screens.push({id:g,url:d,scripts:a.scriptIds,container:a,guid:c,params:f})},popScreen:function(){var b=bb.screens.length;if(b>1){bb.removeLoadedScripts();bb.clearScrollers();bb.menuBar.clearMenu();bb.screen.overlay=null;bb.screen.tabOverlay=null;var c=bb.screens[b-2],a=bb.loadScreen(c.url,c.id,true,c.guid,c.params,c);if(bb.device.isBB5||bb.device.isBB6||bb.device.isBB7){window.scroll(0,0)}}else{if(blackberry){blackberry.app.exit()}}},removeLoadedScripts:function(){var numItems=bb.screens.length;if(numItems>0){var currentStackItem=bb.screens[numItems-1],current=document.getElementById(currentStackItem.guid);for(var i=0;i<currentStackItem.scripts.length;i++){var bbScript=currentStackItem.scripts[i],scriptTag=document.getElementById(bbScript.id);if(bbScript.onunload){eval(bbScript.onunload)}if(scriptTag){document.body.removeChild(scriptTag)}}}},innerHeight:function(){if(bb.device.isPlayBook){if(!window.orientation){return window.innerHeight}else{if(window.orientation==0||window.orientation==180){return 600}else{if(window.orientation==-90||window.orientation==90){return 1024}}}}else{if(!window.orientation){return window.innerHeight}else{if(window.orientation==0||window.orientation==180){return 1280}else{if(window.orientation==-90||window.orientation==90){return 768}}}}},innerWidth:function(){if(bb.device.isPlayBook){if(!window.orientation){return window.innerWidth}else{if(window.orientation==0||window.orientation==180){return 1024}else{if(window.orientation==-90||window.orientation==90){return 600}}}}else{if(!window.orientation){return window.innerWidth}else{if(window.orientation==0||window.orientation==180){return 768}else{if(window.orientation==-90||window.orientation==90){return 1280}}}}},cutHex:function(a){return(a.charAt(0)=="#")?a.substring(1,7):a},guidGenerator:function(){var a=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(a()+a()+a()+a()+a()+a()+a()+a())},refresh:function(){if(bb.scroller){bb.scroller.refresh()}}};Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}};bb.menuBar={height:100,menuOpen:false,menu:false,apply:function(b,a){if(bb.device.isPlayBook||bb.device.isBB10){bb.menuBar.createSwipeMenu(b,a);b.parentNode.removeChild(b);if(window.blackberry){if(bb.device.isPlayBook&&blackberry.app.event){blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar)}else{if(bb.device.isBB10&&blackberry.app){blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)}}}}else{if(window.blackberry&&blackberry.ui.menu){bb.menuBar.createBlackberryMenu(b);b.parentNode.removeChild(b)}else{console.log("Unable to create Blackberry/onSwipeDown menu.")}}},createBlackberryMenu:function(c){var a,d,e,f;a=c.getElementsByTagName("div");for(var b=0;b<a.length;b++){f=a[b];if(f.getAttribute("data-bb-type")==="menu-item"){e=f.innerHTML;if(e){d=new blackberry.ui.menu.MenuItem(false,b,e,f.onclick);blackberry.ui.menu.addMenuItem(d);if(f.hasAttribute("data-bb-selected")&&f.getAttribute("data-bb-selected")==="true"){blackberry.ui.menu.setDefaultMenuItem(d)}}else{console.log("can't add menu item without data-bb-caption")}}else{if(f.getAttribute("data-bb-type")==="menu-separator"){d=new blackberry.ui.menu.MenuItem(true,b);blackberry.ui.menu.addMenuItem(d)}else{console.log("invalid menu item type")}}}},createSwipeMenu:function(e,a){if(bb.device.isBB10){var q=document.createElement("div"),v,p,d,s,f=[],w,g,r,l,n,c;if(bb.device.isPlayBook){v="lowres";bb.menuBar.height=100}else{v="hires";bb.menuBar.height=140}q.setAttribute("class","bb-bb10-menu-bar-"+v+" bb-bb10-menu-bar-"+bb.actionBar.color);m=e.querySelectorAll("[data-bb-type=menu-item]");if(m.length>0){for(p=0;p<m.length;p++){s=m[p];d=s.hasAttribute("data-bb-type")?s.getAttribute("data-bb-type").toLowerCase():undefined;if(d=="menu-item"){r=s.innerHTML;g=s.getAttribute("data-bb-img");if((r&&g)&&(f.length<5)){c=document.createElement("div");f.push(c);c.setAttribute("class","bb-bb10-menu-bar-item-"+v);s.innerHTML="";w=document.createElement("img");w.setAttribute("src",g);c.appendChild(w);l=document.createElement("div");l.setAttribute("class","bb-bb10-menu-bar-item-caption-"+v);l.innerHTML=r;c.appendChild(l);c.onclick=s.onclick;q.appendChild(c)}else{if(f.length>=5){console.log("too many menu items.")}else{console.log("missing menu item caption or image.")}}}else{console.log("invalid menu item type for bb10")}}}if(f.length>0){n=Math.floor(100/f.length);for(p=0;p<f.length;p++){s=f[p];if(p==f.length-1){s.style.width=n-1+"%";s.style["float"]="right"}else{s.style.width=n+"%"}}}else{q.style.display="none";bb.menuBar.menu=null}q.style["-webkit-transform"]="translate(0,0)";q.addEventListener("click",bb.menuBar.onMenuBarClicked,false);document.body.appendChild(q);bb.menuBar.menu=q}else{var h=document.createElement("div"),m,k,o,s,w,u,l,t,b;h.setAttribute("class","pb-menu-bar");m=e.getElementsByTagName("div");if(m.length>0){k=document.createElement("ul");h.appendChild(k);for(o=0;o<m.length;o++){s=m[o];if(s.getAttribute("data-bb-type")==="menu-item"){u=s.innerHTML;iconPath=s.getAttribute("data-bb-img");if(u&&iconPath){b=document.createElement("li");s.innerHTML="";w=new Image();w.src=iconPath;b.appendChild(w);l=document.createElement("div");l.setAttribute("class","pb-menu-bar-caption");l.innerText=u;b.appendChild(l);b.onclick=s.onclick;k.appendChild(b)}}else{if(s.getAttribute("data-bb-type")==="menu-separator"){k=document.createElement("ul");h.appendChild(k)}else{console.log("invalid menu item type")}}}}h.style["-webkit-transform"]="translate(0,0)";h.addEventListener("click",bb.menuBar.onMenuBarClicked,false);document.body.appendChild(h);bb.menuBar.menu=h}if(!bb.screen.overlay){bb.screen.overlay=document.createElement("div");bb.screen.overlay.setAttribute("class","bb-bb10-context-menu-overlay")}a.appendChild(bb.screen.overlay);bb.menuBar.menu.overlay=bb.screen.overlay},showMenuBar:function(){if(!bb.menuBar.menuOpen){bb.menuBar.menu.overlay.style.display="inline";if(bb.device.isPlayBook){blackberry.app.event.onSwipeDown(bb.menuBar.hideMenuBar)}else{if(bb.device.isBB10){blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar);blackberry.event.addEventListener("swipedown",bb.menuBar.hideMenuBar)}}bb.menuBar.menu.style["-webkit-transition"]="all 0.5s ease-in-out";bb.menuBar.menu.style["-webkit-transform"]="translate(0, "+(bb.menuBar.height+3)+"px)";bb.menuBar.menuOpen=true;bb.menuBar.menu.overlay.addEventListener("touchstart",bb.menuBar.overlayTouchHandler,false)}},hideMenuBar:function(){if(bb.menuBar.menuOpen){bb.menuBar.menu.overlay.style.display="none";if(bb.device.isPlayBook){blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar)}else{if(bb.device.isBB10){blackberry.event.removeEventListener("swipedown",bb.menuBar.hideMenuBar);blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)}}bb.menuBar.menu.style["-webkit-transition"]="all 0.5s ease-in-out";bb.menuBar.menu.style["-webkit-transform"]="translate(0, -"+(bb.menuBar.height+3)+"px)";bb.menuBar.menuOpen=false;bb.menuBar.menu.overlay.removeEventListener("touchstart",bb.menuBar.overlayTouchHandler,false)}},overlayTouchHandler:function(a){a.preventDefault();a.stopPropagation();bb.menuBar.hideMenuBar()},onMenuBarClicked:function(){bb.menuBar.hideMenuBar()},clearMenu:function(){if(window.blackberry){if(bb.menuBar.menu&&(bb.device.isPlayBook||bb.device.isBB10)){if(bb.device.isPlayBook&&blackberry.app.event){blackberry.app.event.onSwipeDown("")}else{if(bb.device.isBB10&&blackberry.app){blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar);blackberry.event.removeEventListener("swipedown",bb.menuBar.hideMenuBar)}}bb.menuBar.menu.parentNode.removeChild(bb.menuBar.menu);bb.menuBar.menu=false;bb.menuBar.menuOpen=false}else{if(blackberry.ui&&blackberry.ui.menu){blackberry.ui.menu.clearMenuItems()}}}}};_bb_bbmBubble={apply:function(a){for(var e=0;e<a.length;e++){var f=a[e];if(f.hasAttribute("data-bb-style")){var b=f.getAttribute("data-bb-style").toLowerCase();if(b=="left"){f.setAttribute("class","bb-bbm-bubble-left")}else{f.setAttribute("class","bb-bbm-bubble-right")}var l=f.querySelectorAll("[data-bb-type=item]");for(var c=0;c>l.length;c++){f.removeChild(l[c])}var h=document.createElement("div");h.setAttribute("class","top-left image");f.appendChild(h);h=document.createElement("div");h.setAttribute("class","top-right image");f.appendChild(h);h=document.createElement("div");h.setAttribute("class","inside");f.appendChild(h);var g=document.createElement("div");g.setAttribute("class","nogap");h.appendChild(g);h=document.createElement("div");h.setAttribute("class","bottom-left image");f.appendChild(h);h=document.createElement("div");h.setAttribute("class","bottom-right image");f.appendChild(h);for(var c=0;c<l.length;c++){var d=l[c],k=d.innerHTML;d.innerHTML='<img src="'+d.getAttribute("data-bb-img")+'" />\n<div class="details">'+k+"</div>\n";g.appendChild(d)}}}}};_bb10_fileInput={apply:function(f){var c,e,b,d,a;a=(bb.device.isPlayBook)?"lowres":"hires";for(c=0;c<f.length;c++){e=f[c];e.setAttribute("class","bb-bb10-file-button-"+a);b=document.createElement("div");b.setAttribute("data-bb-type","button");b.innerHTML=e.hasAttribute("data-bb-caption")?e.getAttribute("data-bb-caption"):"Choose File";b.origCaption=b.innerHTML;bb.button.apply([b]);b.input=e;e.parentNode.insertBefore(b,e);b.appendChild(e);b.handleChange=function(){if(this.input.value){this.setCaption(this.input.value.replace(/^.*[\\\/]/,""))}else{this.setCaption(this.origCaption)}};b.handleChange=b.handleChange.bind(b);e.addEventListener("change",b.handleChange,false)}}};_bb5_button={apply:function(g){for(var d=0;d<g.length;d++){var f=g[d],b=f.innerHTML,h="bb5-button",a="bb5-button-highlight";f.innerHTML="";f.setAttribute("class","bb-bb5-button");var c=document.createElement("a");c.setAttribute("class",h);c.setAttribute("x-blackberry-focusable","true");c.setAttribute("onmouseover","this.setAttribute('class','"+a+"')");c.setAttribute("onmouseout","this.setAttribute('class','"+h+"')");f.appendChild(c);var e=document.createElement("span");e.innerHTML=b;c.appendChild(e)}}};_bb10_button={apply:function(b){for(var a=0;a<b.length;a++){bb.button.style(b[a])}},style:function(c){var f=(bb.device.isPlayBook)?f="lowres":"hires",b,h,j,g,e=document.createElement("div"),d=document.createElement("div");disabled=c.hasAttribute("data-bb-disabled"),normal="bb-bb10-button bb-bb10-button-"+f,highlight="bb-bb10-button bb-bb10-button-"+f+" bb10-button-highlight",outerNormal="bb-bb10-button-container-"+f+" bb-bb10-button-container-"+bb.screen.controlColor,outerNormalWithoutImageOnly=outerNormal;c.isImageOnly=false;c.enabled=!disabled;j=c.innerHTML;e.innerHTML=j;c.innerHTML="";c.stretched=false;c.captionElement=e;c.appendChild(d);c.innerElement=d;if(c.hasAttribute("data-bb-style")){var a=c.getAttribute("data-bb-style");if(a=="stretch"){outerNormal=outerNormal+" bb-bb10-button-stretch";c.stretched=true}}h=c.hasAttribute("data-bb-img")?c.getAttribute("data-bb-img"):undefined;if(h){if(!j||j.length==0){outerNormal=outerNormal+" bb-bb10-button-container-image-only-"+f;e.style["background-image"]='url("'+h+'")';c.style["line-height"]="0px";e.setAttribute("class","bb-bb10-button-caption-with-image-only-"+f);c.isImageOnly=true}else{e.setAttribute("class","bb-bb10-button-caption-with-image-"+f);g=document.createElement("div");c.imgElement=g;g.setAttribute("class","bb-bb10-button-image-"+f);g.style["background-image"]='url("'+h+'")';d.appendChild(g)}}d.appendChild(e);b=normal+" bb-bb10-button-disabled-"+bb.screen.controlColor;normal=normal+" bb-bb10-button-"+bb.screen.controlColor;if(disabled){c.removeAttribute("data-bb-disabled");d.setAttribute("class",b)}else{d.setAttribute("class",normal)}c.setAttribute("class",outerNormal);c.outerNormal=outerNormal;c.outerNormalWithoutImageOnly=outerNormalWithoutImageOnly;c.innerElement=d;d.normal=normal;d.highlight=highlight;d.disabledStyle=b;if(!disabled){c.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)};c.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)}}c.trappedClick=c.onclick;c.onclick=undefined;if(c.trappedClick!==null){c.addEventListener("click",function(k){if(this.enabled){this.trappedClick()}},false)}c.setCaption=function(l){if(this.isImageOnly&&(l.length>0)){this.captionElement.setAttribute("class","bb-bb10-button-caption-with-image-"+f);var k=document.createElement("div");this.imgElement=k;k.setAttribute("class","bb-bb10-button-image-"+f);k.style["background-image"]=this.captionElement.style["background-image"];this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(k);this.innerElement.appendChild(this.captionElement);this.setAttribute("class",this.outerNormalWithoutImageOnly);this.captionElement.style["background-image"]="";this.isImageOnly=false}else{if((l.length==0)&&this.imgElement){this.captionElement.setAttribute("class","bb-bb10-button-caption-with-image-only-"+f);this.setAttribute("class",this.outerNormalWithoutImageOnly+" bb-bb10-button-container-image-only-"+f);this.captionElement.style["background-image"]=this.imgElement.style["background-image"];this.isImageOnly=true;this.innerElement.removeChild(this.imgElement);this.imgElement=null}}this.captionElement.innerHTML=l};c.setImage=function(l){if(this.isImageOnly){this.captionElement.style["background-image"]='url("'+l+'")'}else{if(this.imgElement&&(l.length>0)){this.imgElement.style["background-image"]='url("'+l+'")'}else{if(l.length>0){this.captionElement.setAttribute("class","bb-bb10-button-caption-with-image-"+f);var k=document.createElement("div");this.imgElement=k;k.setAttribute("class","bb-bb10-button-image-"+f);k.style["background-image"]='url("'+l+'")';this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(k);this.innerElement.appendChild(this.captionElement)}else{if(this.imgElement&&(l.length==0)){this.innerElement.removeChild(this.imgElement);this.imgElement=null;this.captionElement.setAttribute("class","")}}}}};c.enable=function(){if(this.enabled){return}this.innerElement.setAttribute("class",this.innerElement.normal);this.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)};this.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)};this.enabled=true};c.enable=c.enable.bind(c);c.disable=function(){if(!this.enabled){return}this.innerElement.setAttribute("class",this.innerElement.disabledStyle);this.ontouchstart=null;this.ontouchend=null;this.enabled=false};c.disable=c.disable.bind(c);c.show=function(){this.style.display=this.stretched?"block":"inline-block";bb.refresh()};c.show=c.show.bind(c);c.hide=function(){this.style.display="none";bb.refresh()};c.hide=c.hide.bind(c);c.remove=function(){this.parentNode.removeChild(this);bb.refresh()};c.remove=c.remove.bind(c);return c}};_bbPlayBook_button={apply:function(b){for(var a=0;a<b.length;a++){bb.button.style(b[a])}},style:function(e){var h,d,a,g,b=document.createElement("div"),f=document.createElement("div");disabled=e.hasAttribute("data-bb-disabled"),normal="bb-pb-button",highlight="bb-pb-button-container bb-pb-button-container-"+bb.screen.controlColor+" pb-button-"+bb.screen.controlColor+"-highlight";outerNormal="bb-pb-button-container bb-pb-button-container-"+bb.screen.controlColor+" bb-pb-button-font-"+bb.screen.controlColor,outerNormalWithoutImageOnly=outerNormal;e.isImageOnly=false;e.enabled=!disabled;a=e.innerHTML;b.innerHTML=a;e.innerHTML="";e.stretched=false;e.captionElement=b;e.appendChild(f);e.innerElement=f;if(e.hasAttribute("data-bb-style")){var c=e.getAttribute("data-bb-style");if(c=="stretch"){e.stretched=true;outerNormal=outerNormal+" bb-pb-button-stretch";highlight=highlight+" bb-pb-button-stretch"}}d=e.hasAttribute("data-bb-img")?e.getAttribute("data-bb-img"):undefined;if(d){if(!a||a.length==0){outerNormal=outerNormal+" bb-pb-button-container-image-only";highlight=highlight+" bb-pb-button-container-image-only";b.style["background-image"]='url("'+d+'")';e.style["line-height"]="0px";b.setAttribute("class","bb-pb-button-caption-with-image-only");e.isImageOnly=true}else{b.setAttribute("class","bb-pb-button-caption-with-image");g=document.createElement("div");e.imgElement=g;g.setAttribute("class","bb-pb-button-image");g.style["background-image"]='url("'+d+'")';f.appendChild(g)}}f.appendChild(b);h=normal+" bb-pb-button-disabled-"+bb.screen.controlColor;normal=normal+" bb-pb-button-"+bb.screen.controlColor;if(disabled){e.removeAttribute("data-bb-disabled");f.setAttribute("class",h)}else{f.setAttribute("class",normal)}e.setAttribute("class",outerNormal);e.outerNormal=outerNormal;e.highlight=highlight;e.outerNormalWithoutImageOnly=outerNormalWithoutImageOnly;e.innerElement=f;f.normal=normal;f.disabledStyle=h;if(!disabled){e.ontouchstart=function(){this.setAttribute("class",this.highlight)};e.ontouchend=function(){this.setAttribute("class",this.outerNormal);this.style.color=""}}e.trappedClick=e.onclick;e.onclick=undefined;if(e.trappedClick!==null){e.addEventListener("click",function(j){if(this.enabled){this.trappedClick()}},false)}e.setCaption=function(k){if(this.isImageOnly&&(k.length>0)){this.captionElement.setAttribute("class","bb-pb-button-caption-with-image");var j=document.createElement("div");this.imgElement=j;j.setAttribute("class","bb-pb-button-image");j.style["background-image"]=this.captionElement.style["background-image"];this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(j);this.innerElement.appendChild(this.captionElement);this.setAttribute("class",this.outerNormalWithoutImageOnly);this.captionElement.style["background-image"]="";this.isImageOnly=false}else{if((k.length==0)&&this.imgElement){this.captionElement.setAttribute("class","bb-pb-button-caption-with-image-only");this.setAttribute("class",this.outerNormalWithoutImageOnly+" bb-pb-button-container-image-only");this.captionElement.style["background-image"]=this.imgElement.style["background-image"];this.isImageOnly=true;this.innerElement.removeChild(this.imgElement);this.imgElement=null}}this.captionElement.innerHTML=k};e.setImage=function(k){if(this.isImageOnly){this.captionElement.style["background-image"]='url("'+k+'")'}else{if(this.imgElement&&(k.length>0)){this.imgElement.style["background-image"]='url("'+k+'")'}else{if(k.length>0){this.captionElement.setAttribute("class","bb-pb-button-caption-with-image");var j=document.createElement("div");this.imgElement=j;j.setAttribute("class","bb-pb-button-image");j.style["background-image"]='url("'+k+'")';this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(j);this.innerElement.appendChild(this.captionElement)}else{if(this.imgElement&&(k.length==0)){this.innerElement.removeChild(this.imgElement);this.imgElement=null;this.captionElement.setAttribute("class","")}}}}};e.enable=function(){if(this.enabled){return}this.innerElement.setAttribute("class",this.innerElement.normal);this.ontouchstart=function(){this.setAttribute("class",this.highlight)};this.ontouchend=function(){this.setAttribute("class",this.outerNormal)};this.enabled=true};e.enable=e.enable.bind(e);e.disable=function(){if(!this.enabled){return}this.innerElement.setAttribute("class",this.innerElement.disabledStyle);this.ontouchstart=null;this.ontouchend=null;this.enabled=false};e.disable=e.disable.bind(e);e.show=function(){this.style.display=this.stretched?"block":"inline-block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.parentNode.removeChild(this);bb.refresh()};e.remove=e.remove.bind(e);return e}};_bb_6_7_button={apply:function(b){for(var a=0;a<b.length;a++){bb.button.style(b[a])}},style:function(d){var c=d.hasAttribute("data-bb-disabled"),e="bb-bb7-button",a="bb-bb7-button-highlight";d.stretched=false;d.enabled=!c;if(c){e="bb-bb7-button-disabled";d.removeAttribute("data-bb-disabled")}if(bb.device.isHiRes){e=e+" bb-bb7-button-hires";a=a+" bb-bb7-button-hires"}else{e=e+" bb-bb7-button-lowres";a=a+" bb-bb7-button-lowres"}if(d.hasAttribute("data-bb-style")){var b=d.getAttribute("data-bb-style");if(b=="stretch"){d.stretched=true;e=e+" button-stretch";a=a+" button-stretch"}}d.highlight=a;d.normal=e;d.setAttribute("class",e);if(!c){d.setAttribute("x-blackberry-focusable","true");d.onmouseover=function(){this.setAttribute("class",this.highlight)};d.onmouseout=function(){this.setAttribute("class",this.normal)}}d.trappedClick=d.onclick;d.onclick=undefined;if(d.trappedClick!==null){d.addEventListener("click",function(f){if(this.enabled){this.trappedClick()}},false)}d.setCaption=function(f){this.innerHTML=f};d.setCaption=d.setCaption.bind(d);d.setImage=function(f){};d.setImage=d.setImage.bind(d);d.enable=function(){if(this.enabled){return}this.setAttribute("class",e);this.setAttribute("x-blackberry-focusable","true");this.onmouseover=function(){this.setAttribute("class",this.highlight)};this.onmouseout=function(){this.setAttribute("class",this.normal)};this.enabled=true};d.enable=d.enable.bind(d);d.disable=function(){if(!this.enabled){return}var g="bb-bb7-button-disabled";if(bb.device.isHiRes){g=g+" bb-bb7-button-hires"}else{g=g+" bb-bb7-button-lowres"}if(this.hasAttribute("data-bb-style")){var f=this.getAttribute("data-bb-style");if(f=="stretch"){g=g+" button-stretch";a=a+" button-stretch"}}this.setAttribute("class",g);this.removeAttribute("x-blackberry-focusable");this.onmouseover=null;this.onmouseout=null;this.enabled=false};d.disable=d.disable.bind(d);d.show=function(){this.style.display=this.stretched?"block":"inline-block"};d.show=d.show.bind(d);d.hide=function(){this.style.display="none"};d.hide=d.hide.bind(d);d.remove=function(){this.parentNode.removeChild(this);bb.refresh()};d.remove=d.remove.bind(d);return d}};_bb10_dropdown={apply:function(a){for(i=0;i<a.length;i++){bb.dropdown.style(a[i])}},style:function(m){var v=(bb.device.isPlayBook)?"lowres":"hires",w,p,n,t,s,b,r,a,o,c,k=!m.hasAttribute("disabled"),u="bb-bb10-dropdown bb-bb10-dropdown-"+v+" bb-bb10-dropdown-"+bb.screen.controlColor+" bb-bb10-dropdown-"+v,f="bb-bb10-dropdown bb-bb10-dropdown-"+v+" bb-bb10-dropdown-highlight-"+bb.screen.controlColor+" bb10Highlight bb-bb10-dropdown-"+v,d="bb-bb10-dropdown-container-"+v+" bb-bb10-dropdown-container-"+bb.screen.controlColor+" bb-bb10-dropdown-container-"+v,g="bb-bb10-dropdown-container-inner-"+v+" bb-bb10-dropdown-container-inner-"+bb.screen.controlColor,e="bb-bb10-dropdown-inner-"+v+" bb-bb10-dropdown-inner-"+bb.screen.controlColor;m.style.display="none";m.enabled=k;r=document.createElement("div");r.select=m;r.items=[];r.setAttribute("data-bb-type","dropdown");m.dropdown=r;if(m.parentNode){m.parentNode.insertBefore(r,m)}r.appendChild(m);s=document.createElement("div");s.setAttribute("class",g);r.appendChild(s);if(m.hasAttribute("data-bb-style")){var q=m.getAttribute("data-bb-style");if(q=="stretch"){u=u+" bb-bb10-dropdown-stretch";f=f+" bb-bb10-dropdown-stretch"}}b=document.createElement("div");if(m.enabled){b.setAttribute("class",u)}else{b.setAttribute("class",u+" bb-bb10-dropdown-disabled-"+bb.screen.controlColor)}s.appendChild(b);t=document.createElement("div");t.setAttribute("class",e);b.appendChild(t);a=document.createElement("div");r.labelElement=a;a.setAttribute("class","bb-bb10-dropdown-label-"+v);if(m.hasAttribute("data-bb-label")){a.innerHTML=m.getAttribute("data-bb-label")}t.appendChild(a);w=document.createElement("div");w.setAttribute("class","bb-bb10-dropdown-arrow-"+v+"-"+bb.screen.controlColor);t.appendChild(w);r.img=w;o=document.createElement("div");r.captionElement=o;o.setAttribute("class","bb-bb10-dropdown-caption-"+v);t.appendChild(o);var h=document.createElement("div");h.style.position="relative";h.style["margin-top"]="10px";h.style.overflow="hidden";s.appendChild(h);var l=document.createElement("div");h.appendChild(l);c=document.createElement("div");r.itemsElement=c;c.setAttribute("class","bb-bb10-dropdown-items");l.appendChild(c);r.refreshOptions=function(){var x=m.getElementsByTagName("option"),j="",y,z;this.itemsElement.innerHTML="";this.items=[];this.options=x;for(n=0;n<x.length;n++){y=x[n];z=document.createElement("div");this.items.push(z);z.selectedStyle="bb-bb10-dropdown-item-"+v+" bb-bb10-dropdown-item-"+bb.screen.controlColor+" bb-bb10-dropdown-item-selected-"+bb.screen.controlColor;z.normalStyle="bb-bb10-dropdown-item-"+v+" bb-bb10-dropdown-item-"+bb.screen.controlColor;z.index=n;z.select=this.select;z.dropdown=this;if(!z.dropdown.selected){z.dropdown.selected=z}z.innerHTML=y.innerHTML;this.itemsElement.appendChild(z);w=document.createElement("div");w.setAttribute("class","bb-bb10-dropdown-selected-image-"+v+"-"+bb.screen.controlColor);z.img=w;z.appendChild(w);if(y.hasAttribute("selected")||y.selected){j=y.innerHTML;z.setAttribute("class",z.selectedStyle);w.style.visibility="visible";z.dropdown.selected=z}else{z.setAttribute("class",z.normalStyle)}z.ontouchstart=function(A){this.style["background-color"]=bb.options.highlightColor;this.style.color="white"};z.ontouchend=function(A){this.style["background-color"]="transparent";this.style.color=""};z.onclick=function(){this.select.setSelectedItem(this.index)}}if((j=="")&&(x.length>0)){j=x[0].innerHTML}if(j!=""){o.innerHTML=j}};r.refreshOptions=r.refreshOptions.bind(r);r.refreshOptions();r.setAttribute("class",d);r.buttonOuter=b;r.isRefreshed=false;r.caption=o;b.dropdown=r;r.open=false;b.normal=u;b.highlight=f;r.scroller=new iScroll(h,{vScrollbar:false,onBeforeScrollStart:function(j){if(bb.scroller){bb.scroller.disable()}j.preventDefault()},onBeforeScrollEnd:function(j){if(bb.scroller){bb.scroller.enable()}}});bb.dropdownScrollers.push(r.scroller);r.scrollArea=h;b.dotouchstart=function(j){this.setAttribute("class",this.highlight)};b.dotouchend=function(j){this.setAttribute("class",this.normal)};b.doclick=function(j){if(!this.dropdown.open){this.dropdown.internalShow()}else{this.dropdown.internalHide()}};if(m.enabled){b.ontouchstart=b.dotouchstart;b.ontouchend=b.dotouchend;b.onclick=b.doclick}r.internalShow=function(){var j;this.open=true;if(this.options.length>5){this.numItems=5}else{this.numItems=this.options.length}if(bb.device.isPlayBook){j=(this.numItems*43);this.style.height=45+j+"px"}else{j=(this.numItems*99);this.style.height=95+j+"px"}this.scrollArea.style.height=j-10+"px";if(!this.isRefreshed){this.scroller.refresh();this.isRefreshed=true}this.scroller.scrollToElement(this.selected,0);this.caption.style.opacity="0.0";this.caption.style["-webkit-transition"]="opacity 0.5s linear";this.caption.style["-webkit-backface-visibility"]="hidden";this.caption.style["-webkit-perspective"]=1000;this.caption.style["-webkit-transform"]="translate3d(0,0,0)";this.img.style.opacity="1.0";this.img.style["-webkit-transition"]="all 0.5s ease-in-out";this.img.style["-webkit-transform"]="rotate(-360deg)";if(bb.scroller){bb.scroller.refresh()}};r.internalShow=r.internalShow.bind(r);r.internalHide=function(){this.open=false;this.style.height="59px";if(bb.device.isPlayBook){this.style.height="43px"}else{this.style.height="95px"}this.caption.style.opacity="1.0";this.caption.style["-webkit-transition"]="opacity 0.5s linear";this.caption.style["-webkit-backface-visibility"]="hidden";this.caption.style["-webkit-perspective"]=1000;this.img.style.opacity="0.0";this.img.style["-webkit-transition"]="all 0.5s ease-in-out";this.img.style["-webkit-transform"]="rotate(0deg)";if(bb.scroller){bb.scroller.refresh()}};r.internalHide=r.internalHide.bind(r);m.setSelectedItem=function(j){if(this.selectedIndex!=j){var x=this.dropdown.items[j];if(!x){return}if(this.dropdown.selected){this.dropdown.selected.setAttribute("class",x.normalStyle);this.dropdown.selected.img.style.visibility="hidden"}x.setAttribute("class",x.selectedStyle);x.img.style.visibility="visible";this.dropdown.selected=x;this.selectedIndex=j;this.dropdown.caption.innerHTML=this.options[j].text;this.dropdown.internalHide();window.setTimeout(this.fireEvent,0)}};m.setSelectedItem=m.setSelectedItem.bind(m);m.setSelectedText=function(x){for(var j=0;j<this.options.length;j++){if(this.options[j].text==x){this.setSelectedItem(j);return}}};m.setSelectedText=m.setSelectedText.bind(m);m.fireEvent=function(){var j=document.createEvent("HTMLEvents");j.initEvent("change",false,true);this.dispatchEvent(j)};m.fireEvent=m.fireEvent.bind(m);m.enable=function(){if(this.enabled){return}this.dropdown.buttonOuter.ontouchstart=this.dropdown.buttonOuter.dotouchstart;this.dropdown.buttonOuter.ontouchend=this.dropdown.buttonOuter.dotouchend;this.dropdown.buttonOuter.onclick=this.dropdown.buttonOuter.doclick;this.dropdown.buttonOuter.setAttribute("class",u);this.removeAttribute("disabled");this.enabled=true};m.enable=m.enable.bind(m);m.disable=function(){if(!m.enabled){return}this.dropdown.internalHide();this.dropdown.buttonOuter.ontouchstart=null;this.dropdown.buttonOuter.ontouchend=null;this.dropdown.buttonOuter.onclick=null;this.dropdown.buttonOuter.setAttribute("class",u+" bb-bb10-dropdown-disabled-"+bb.screen.controlColor);this.enabled=false;this.setAttribute("disabled","disabled")};m.disable=m.disable.bind(m);m.show=function(){this.dropdown.style.display="block";bb.refresh()};m.show=m.show.bind(m);m.hide=function(){this.dropdown.style.display="none";bb.refresh()};m.hide=m.hide.bind(m);m.remove=function(){this.dropdown.parentNode.removeChild(this.dropdown);bb.refresh()};m.remove=m.remove.bind(m);m.refresh=function(){this.dropdown.internalHide();this.dropdown.isRefreshed=false;this.dropdown.refreshOptions()};m.refresh=m.refresh.bind(m);m.setCaption=function(j){this.dropdown.labelElement.innerHTML=j};m.setCaption=m.setCaption.bind(m);return r}};_bb_6_7_PlayBook_dropdown={apply:function(b){for(var a=0;a<b.length;a++){bb.dropdown.style(b[a])}},style:function(h){var m=h.getElementsByTagName("option"),k="",e,b,g=!h.hasAttribute("disabled");if(bb.device.isPlayBook){e="ontouchstart";b="ontouchend"}else{e="onmouseover";b="onmouseout"}h.style.display="none";h.stretch=false;h.enabled=g;if(m.length>0){k=m[0].innerHTML}for(var d=0;d<m.length;d++){if(m[d].hasAttribute("selected")){k=m[d].innerHTML;break}}var l=document.createElement("div");l.innerHTML='<div data-bb-type="caption"><span>'+k+"</span></div>";h.dropdown=l;var f="bb-bb7-dropdown",c="bb-bb7-dropdown-highlight";if(bb.device.isHiRes){f=f+" bb-bb7-dropdown-hires";c=c+" bb-bb7-dropdown-hires"}else{f=f+" bb-bb7-dropdown-lowres";c=c+" bb-bb7-dropdown-lowres"}if(h.hasAttribute("data-bb-style")){var a=h.getAttribute("data-bb-style");if(a=="stretch"){h.stretch=true;f=f+" dropdown-stretch";c=c+" dropdown-stretch"}}l.setAttribute("data-bb-type","dropdown");if(h.enabled){l.setAttribute("class",f)}else{l.setAttribute("class",f+" bb-bb7-dropdown-disabled")}l.setAttribute("x-blackberry-focusable","true");l.inEvent="this.setAttribute('class','"+c+"')";l.outEvent="this.setAttribute('class','"+f+"')";if(h.parentNode){h.parentNode.insertBefore(l,h)}l.appendChild(h);l.doclick=function(){var u=this.getElementsByTagName("select")[0];if(bb.device.isPlayBook||bb.device.isRipple){var n=document.createElement("div");n.setAttribute("id","ripple-dropdown-overlay");n.setAttribute("style","position: absolute;left: 0px;top: "+document.body.scrollTop+"px;width:100%;height:100%;z-index: 1000000;");n.onclick=function(){if(this.parentNode!==null){this.parentNode.removeChild(this)}};var s=document.createElement("div");if(bb.device.isHiRes){s.setAttribute("class","ripple-dropdown-dialog bb-hires-screen")}else{s.setAttribute("class","ripple-dropdown-dialog")}n.appendChild(s);s.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode)};for(var o=0;o<u.options.length;o++){var x=u.options[o],j=document.createElement("div");s.appendChild(j);var p=document.createElement("div");if(x.selected){p.setAttribute("class","item selected");j.setAttribute("class","backgroundHighlight backgroundSelected")}else{p.setAttribute("class","item");j.setAttribute("class","backgroundHighlight")}p.innerHTML="<span>"+x.text+"</span>";p.setAttribute("x-blackberry-focusable","true");p.setAttribute("data-bb-index",o);p.dropdown=this;p.onclick=function(){var z=this.getAttribute("data-bb-index");var y=this.dropdown.getElementsByTagName("select")[0];if(y){y.setSelectedItem(z)}};j.appendChild(p)}var w=(u.options.length*45)+20,v=window.innerHeight-80;if(w>v){w=v;s.style.height=v+"px"}var t=(window.innerHeight/2)-(w/2);s.style.top=t+"px";document.body.appendChild(n)}else{var q=[];for(var o=0;o<u.options.length;o++){q[o]={label:u.options[o].text,selected:o==u.selectedIndex,enabled:true,type:"option"}}try{blackberry.ui.dialog.selectAsync(false,q,function(y){if(y.length>0&&y[0]<u.options.length){u.setSelectedItem(y[0])}})}catch(r){console.log("Exception in selectAsync: "+r)}}};if(h.enabled){l.onclick=l.doclick;l.setAttribute(e,l.inEvent);l.setAttribute(b,l.outEvent)}h.setSelectedItem=function(p){var j=this.dropdown.getElementsByTagName("select")[0];if(j&&j.selectedIndex!=p){j.selectedIndex=p;var n=this.dropdown.querySelectorAll("[data-bb-type=caption]")[0];if(n){n.innerHTML="<span>"+j.options[p].text+"</span>"}var o=document.createEvent("HTMLEvents");o.initEvent("change",false,true);j.dispatchEvent(o)}};h.setSelectedText=function(n){for(var j=0;j<this.options.length;j++){if(this.options[j].text==n){this.setSelectedItem(j);return}}};h.setSelectedText=h.setSelectedText.bind(h);h.fireEvent=function(){var j=document.createEvent("HTMLEvents");j.initEvent("change",false,true);this.dispatchEvent(j)};h.fireEvent=h.fireEvent.bind(h);h.enable=function(){if(this.enabled){return}this.dropdown.onclick=this.dropdown.doclick;this.dropdown.setAttribute(e,l.inEvent);this.dropdown.setAttribute(b,l.outEvent);this.dropdown.setAttribute("class",f);this.removeAttribute("disabled");this.enabled=true};h.enable=h.enable.bind(h);h.disable=function(){if(!h.enabled){return}this.dropdown.onclick=null;this.dropdown.removeAttribute(e);this.dropdown.removeAttribute(b);this.dropdown.setAttribute("class",f+" bb-bb7-dropdown-disabled");this.enabled=false;this.setAttribute("disabled","disabled")};h.disable=h.disable.bind(h);h.show=function(){this.dropdown.style.display=this.stretch?"block":"table-cell";bb.refresh()};h.show=h.show.bind(h);h.hide=function(){this.dropdown.style.display="none";bb.refresh()};h.hide=h.hide.bind(h);h.remove=function(){this.dropdown.parentNode.removeChild(this.dropdown);bb.refresh()};h.remove=h.remove.bind(h);h.refresh=function(){var p=this.getElementsByTagName("option"),q,n="";if(p.length>0){n=p[0].innerHTML}for(var o=0;o<p.length;o++){if(p[o].hasAttribute("selected")){n=p[o].innerHTML;break}}q=this.dropdown.querySelectorAll("[data-bb-type=caption]")[0];if(q){q.innerHTML="<span>"+n+"</span>"}};h.refresh=h.refresh.bind(h);h.setCaption=function(j){if(console){console.log("WARNING: setCaption is not supported on BlackBerry 5/6/7/PlayBook")}};h.setCaption=h.setCaption.bind(h);return l}};_bb10_checkbox={apply:function(a){var d,j,b,e,f,g,h=(bb.device.isPlayBook)?"lowres":"hires",c=bb.screen.controlColor;for(d=0;d<a.length;d++){j=a[d];b=document.createElement("div");b.setAttribute("class","bb-bb10-checkbox-target-"+h);j.parentNode.insertBefore(b,j);j.style.display="none";b.appendChild(j);b.input=j;j.touchTarget=b;e=document.createElement("div");e.setAttribute("class","bb-bb10-checkbox-outer-"+h+" bb-bb10-checkbox-outer-"+c);b.appendChild(e);f=document.createElement("div");f.normal="bb-bb10-checkbox-inner-"+h+" bb-bb10-checkbox-inner-"+c;f.setAttribute("class",f.normal);e.appendChild(f);g=document.createElement("div");g.hiddenClass="bb-bb10-checkbox-check-hidden-"+h+" bb-bb10-checkbox-check-image";g.displayClass="bb-bb10-checkbox-check-display-"+h+" bb-bb10-checkbox-check-image";g.setAttribute("class",g.hiddenClass);g.style["-webkit-transition-property"]="all";g.style["-webkit-transition-duration"]="0.1s";f.appendChild(g);b.checkElement=g;b.innerElement=f;b.highlight="-webkit-linear-gradient(top,  rgb("+(bb.options.shades.R+32)+", "+(bb.options.shades.G+32)+", "+(bb.options.shades.B+32)+") 0%, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 100%)";b.touchHighlight="-webkit-linear-gradient(top,  rgba("+(bb.options.shades.R-64)+", "+(bb.options.shades.G-64)+", "+(bb.options.shades.B-64)+",0.25) 0%, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+",0.25) 100%)";b.ontouchstart=function(){if(!this.input.checked){this.innerElement.style.background=this.touchHighlight}};b.ontouchend=function(){if(!this.input.checked){this.innerElement.style.background=""}};b.onclick=function(){var k=document.createEvent("HTMLEvents");k.initEvent("change",false,true);this.input.checked=!this.input.checked;this.drawChecked();this.input.dispatchEvent(k)};b.drawChecked=function(){if(this.input.checked){this.checkElement.setAttribute("class",this.checkElement.displayClass);this.innerElement.style["background-image"]=b.highlight}else{this.checkElement.setAttribute("class",this.checkElement.hiddenClass);this.innerElement.style["background-image"]=""}};b.drawChecked=b.drawChecked.bind(b);j.setChecked=function(k){if(k==this.checked){return}this.checked=k;this.touchTarget.drawChecked()};j.setChecked=j.setChecked.bind(j);j.getChecked=function(){return this.checked};j.setChecked=j.setChecked.bind(j);b.drawChecked()}}};_bb10_radio={apply:function(a){var g=(bb.device.isPlayBook)?"lowres":"hires",e,f,h,j,c,b,d=bb.screen.controlColor;for(e=0;e<a.length;e++){f=a[e];input=f;f=document.createElement("div");f.setAttribute("class","bb-bb10-radio-container-"+g+"-"+d);f.input=input;input.outerElement=f;input.style.display="none";input.radio=f;input.parentNode.insertBefore(f,input);f.appendChild(input);j=document.createElement("div");j.setAttribute("class","bb-bb10-radio-dot-"+g);j.highlight="-webkit-linear-gradient(top,  rgb("+(bb.options.shades.R+32)+", "+(bb.options.shades.G+32)+", "+(bb.options.shades.B+32)+") 0%, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 100%)";j.touchHighlight="-webkit-linear-gradient(top,  rgba("+(bb.options.shades.R-64)+", "+(bb.options.shades.G-64)+", "+(bb.options.shades.B-64)+",0.25) 0%, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+",0.25) 100%)";if(input.checked){j.style.background=j.highlight}f.dotDiv=j;f.appendChild(j);c=document.createElement("div");c.setAttribute("class","bb-bb10-radio-dot-center-"+g);if(!input.checked){bb.radio.resetDot(c)}j.appendChild(c);j.centerDotDiv=c;j.slideOutUp=function(){if(bb.device.isPlayBook){this.style.height="0px";this.style.width="10px";this.style.top="9px";this.style.left="15px"}else{this.style.height="0px";this.style.width="20px";this.style.top="18px";this.style.left="30px"}bb.radio.resetDot(this.centerDotDiv);this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="linear";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]=1000;this.style["-webkit-transform"]="translate3d(0,0,0)"};j.slideOutUp=j.slideOutUp.bind(j);j.slideOutDown=function(){if(bb.device.isPlayBook){this.style.height="0px";this.style.width="10px";this.style.top="30px";this.style.left="15px"}else{this.style.height="0px";this.style.width="20px";this.style.top="60px";this.style.left="30px"}bb.radio.resetDot(this.centerDotDiv);this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="linear";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]=1000;this.style["-webkit-transform"]="translate3d(0,0,0)"};j.slideOutDown=j.slideOutDown.bind(j);j.slideIn=function(){if(bb.device.isPlayBook){this.style.height="20px";this.style.width="20px";this.style.top="10px";this.style.left="9px";this.centerDotDiv.style.height="10px";this.centerDotDiv.style.width="10px";this.centerDotDiv.style.top="5px";this.centerDotDiv.style.left="5px"}else{this.style.height="40px";this.style.width="40px";this.style.top="19px";this.style.left="19px";this.centerDotDiv.style.height="18px";this.centerDotDiv.style.width="18px";this.centerDotDiv.style.top="11px";this.centerDotDiv.style.left="11px"}this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="ease-in";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]=1000;this.style["-webkit-transform"]="translate3d(0,0,0)";this.centerDotDiv.style["-webkit-transition-delay"]="0.1s";this.centerDotDiv.style["-webkit-transition-property"]="all";this.centerDotDiv.style["-webkit-transition-duration"]="0.1s";this.centerDotDiv.style["-webkit-transition-timing-function"]="ease-in";this.centerDotDiv.style["-webkit-backface-visibility"]="hidden";this.centerDotDiv.style["-webkit-perspective"]=1000;this.centerDotDiv.style["-webkit-transform"]="translate3d(0,0,0)"};j.slideIn=j.slideIn.bind(j);f.selectedRadio=undefined;f.slideFromTop=true;f.ontouchstart=function(){if(!this.input.checked){this.slideFromTop=true;this.selectedRadio=this.getCurrentlyChecked();if(this.selectedRadio){if(this.getTop(this.selectedRadio.radio)>=this.getTop(this)){this.slideFromTop=false}}this.dotDiv.style["-webkit-transition"]="none";if(bb.device.isPlayBook){this.dotDiv.style.height="20px";this.dotDiv.style.width="20px";this.dotDiv.style.top="10px";this.dotDiv.style.left="9px"}else{this.dotDiv.style.height="40px";this.dotDiv.style.width="40px";this.dotDiv.style.top="19px";this.dotDiv.style.left="19px"}bb.radio.resetDot(this.dotDiv.centerDotDiv);this.dotDiv.style.background=this.dotDiv.touchHighlight}};f.ontouchend=function(){if(!this.input.checked){this.dotDiv.style["-webkit-transition"]="none";if(bb.device.isPlayBook){this.dotDiv.style.height="0px";this.dotDiv.style.width="9px";this.dotDiv.style.left="16px"}else{this.dotDiv.style.height="0px";this.dotDiv.style.width="18px";this.dotDiv.style.left="32px"}if(this.slideFromTop){this.dotDiv.style.top=bb.device.isPlayBook?"9px":"18px"}else{this.dotDiv.style.top=bb.device.isPlayBook?"30px":"60px"}}};f.onclick=function(){if(!this.input.checked){var k=document.createEvent("HTMLEvents");k.initEvent("change",false,true);this.dotDiv.style.background=this.dotDiv.highlight;this.dotDiv.slideIn();if(this.selectedRadio){this.selectedRadio.removeAttribute("checked");this.selectedRadio.dispatchEvent(k);if(this.slideFromTop){this.selectedRadio.radio.dotDiv.slideOutDown()}else{this.selectedRadio.radio.dotDiv.slideOutUp()}}this.input.setAttribute("checked","true");this.input.dispatchEvent(k)}};f.getCurrentlyChecked=function(){var k=document.querySelectorAll("input[type=radio][name="+this.input.name+"][checked=true]");if(k.length>0){return k[0]}else{return undefined}};f.getCurrentlyChecked=f.getCurrentlyChecked.bind(f);f.getTop=function(k){var l=0;while(k){l=l+k.offsetTop;k=k.offsetParent}return l};input.setChecked=function(){if(!this.checked){this.slideFromTop=true;this.outerElement.selectedRadio=this.outerElement.getCurrentlyChecked();if(this.outerElement.selectedRadio){if(this.outerElement.getTop(this.outerElement.selectedRadio.radio)>=this.outerElement.getTop(this.outerElement)){this.outerElement.slideFromTop=false}}this.outerElement.dotDiv.style["-webkit-transition"]="none";if(bb.device.isPlayBook){this.outerElement.dotDiv.style.height="0px";this.outerElement.dotDiv.style.width="9px";this.outerElement.dotDiv.style.left="16px"}else{this.outerElement.dotDiv.style.height="0px";this.outerElement.dotDiv.style.width="18px";this.outerElement.dotDiv.style.left="32px"}if(this.outerElement.slideFromTop){this.outerElement.dotDiv.style.top=bb.device.isPlayBook?"9px":"18px"}else{this.outerElement.dotDiv.style.top=bb.device.isPlayBook?"30px":"60px"}var k=document.createEvent("MouseEvents");k.initMouseEvent("click",true,true);this.outerElement.dispatchEvent(k)}};input.setChecked=input.setChecked.bind(input);input.getChecked=function(){return this.checked};input.setChecked=input.setChecked.bind(input)}},resetDot:function(a){a.style["-webkit-transition"]="none";if(bb.device.isPlayBook){a.style.height="0px";a.style.width="0px";a.style.top="10px";a.style.left="9px"}else{a.style.height="0px";a.style.width="0px";a.style.top="20px";a.style.left="20px"}}};_bb_5_6_7_imageList={apply:function(f){var c,b,d,a;for(var c=0;c<f.length;c++){d=f[c];d.items=[];d.hideImages=d.hasAttribute("data-bb-images")?(d.getAttribute("data-bb-images").toLowerCase()=="none"):false;if(!d.hideImages){d.imagePlaceholder=d.hasAttribute("data-bb-image-placeholder")?d.getAttribute("data-bb-image-placeholder"):undefined}d.headerJustify=d.hasAttribute("data-bb-header-justify")?d.getAttribute("data-bb-header-justify").toLowerCase():"center";d.listStyle=d.hasAttribute("data-bb-style")?d.getAttribute("data-bb-style").toLowerCase():"default";if(bb.device.isHiRes){d.setAttribute("class","bb-hires-image-list")}else{d.setAttribute("class","bb-lowres-image-list")}d.styleItem=function(n){var n,r,v,q,o,k,g,j,u,l,m,h,t,s,p=(bb.device.isHiRes)?"hires":"lowres";if(n.hasAttribute("data-bb-type")){r=n.getAttribute("data-bb-type").toLowerCase();v=n.innerHTML;q="";if(n.hasAttribute("data-bb-accent-text")){q=n.getAttribute("data-bb-accent-text")}if(r=="header"){o="bb-"+p+"-image-list-header";k="bb-"+p+"-image-list-header-hover";if(this.headerJustify=="left"){o=o+" bb-"+p+"-image-list-header-left";k=k+" bb-"+p+"-image-list-header-left"}else{if(this.headerJustify=="right"){o=o+" bb-"+p+"-image-list-header-right";k=k+" bb-"+p+"-image-list-header-right"}else{o=o+" bb-"+p+"-image-list-header-center";k=k+" bb-"+p+"-image-list-header-center"}}n.normal=o;n.highlight=k;n.innerHTML="<p>"+v+"</p>";n.setAttribute("x-blackberry-focusable","true");n.setAttribute("class",o);n.setAttribute("onmouseover","this.setAttribute('class',this.highlight)");n.setAttribute("onmouseout","this.setAttribute('class',this.normal)")}else{if(r=="item"){n.innerHTML="";n.setAttribute("class","bb-"+p+"-image-list-item");n.setAttribute("onmouseover","this.setAttribute('class','bb-"+p+"-image-list-item bb-"+p+"-image-list-item-hover')");n.setAttribute("onmouseout","this.setAttribute('class','bb-"+p+"-image-list-item')");n.setAttribute("x-blackberry-focusable","true");if(!this.hideImages){m=document.createElement("img");n.img=m;if(this.imagePlaceholder){m.placeholder=this.imagePlaceholder;m.src=n.hasAttribute("data-bb-img")?n.getAttribute("data-bb-img"):this.imagePlaceholder;m.onerror=function(){if(this.src==this.placeholder){return}this.src=this.placeholder}}else{m.setAttribute("src",n.getAttribute("data-bb-img"))}n.appendChild(m)}g=document.createElement("div");n.appendChild(g);if(this.hideImages){g.normal="bb-"+p+"-image-list-details bb-"+p+"-image-list-noimage"}else{g.normal="bb-"+p+"-image-list-details"}j=document.createElement("div");j.innerHTML=n.getAttribute("data-bb-title");j.className="title";n.titleDiv=j;g.appendChild(j);if(this.listStyle=="arrowlist"){g.normal=g.normal+" details-button-margin";h=document.createElement("div");n.appendChild(h);n.btn=h;h.setAttribute("class","button");t=document.createElement("div");t.normal="bb-"+p+"-image-list-item-button-border";t.setAttribute("class",t.normal);h.appendChild(t);s=document.createElement("div");s.setAttribute("class","bb-"+p+"-image-list-item-button-inner bb-image-list-item-chevron-light");t.appendChild(s)}else{l=document.createElement("div");l.innerHTML=q;l.className="accent-text";n.accentDiv=l;g.appendChild(l)}g.setAttribute("class",g.normal);u=document.createElement("div");u.className="description";n.descriptionDiv=u;g.appendChild(u);if(v.length==0){v="&nbsp;";u.style.visibilty="hidden";j.style["margin-top"]=(bb.device.isHiRes)?"14px":"18px";if(l){l.style["margin-top"]=(bb.device.isHiRes)?"-32px":"-25px"}if(this.listStyle=="arrowlist"){h.style["margin-top"]=(bb.device.isHiRes)?"-73px":"-70px"}}u.innerHTML=v;n.remove=function(){var x=this.parentNode,w=x.items.indexOf(this);this.parentNode.removeChild(this);x.items.splice(w,1);if(bb.scroller){bb.scroller.refresh()}};n.remove=n.remove.bind(n);n.trappedClick=n.onclick;n.onclick=undefined;n.outerElement=this;n.addEventListener("click",function(w){this.outerElement.selected=this;if(this.trappedClick){this.trappedClick()}},false);n.getTitle=function(){return this.titleDiv.innerHTML};n.getTitle=n.getTitle.bind(n);n.getDescription=function(){return this.descriptionDiv.innerHTML};n.getDescription=n.getDescription.bind(n);n.getAccentText=function(){return(this.accentDiv)?this.accentDiv.innerHTML:undefined};n.getAccentText=n.getAccentText.bind(n);n.getImage=function(){return(this.img)?this.img.getAttribute("src"):undefined};n.getImage=n.getImage.bind(n)}}}};d.styleItem=d.styleItem.bind(d);d.appendItem=function(g){this.styleItem(g);this.appendChild(g);this.items.push(g);if(bb.scroller){bb.scroller.refresh()}};d.appendItem=d.appendItem.bind(d);d.insertItemBefore=function(g,h){this.styleItem(g);this.insertBefore(g,h);this.items.splice(this.items.indexOf(h),0,g);if(bb.scroller){bb.scroller.refresh()}};d.insertItemBefore=d.insertItemBefore.bind(d);d.getItems=function(){var h,g=[];for(h=0;h<this.items.length;h++){g.push(this.items[h])}return g};d.getItems=d.getItems.bind(d);d.clear=function(){this.items=[];d.innerHTML="";if(bb.scroller){bb.scroller.refresh()}};d.clear=d.clear.bind(d);a=d.querySelectorAll("[data-bb-type=item], [data-bb-type=header]");var e;for(b=0;b<a.length;b++){e=a[b];d.styleItem(e);d.items.push(e)}}}};_bbPlayBook_imageList={apply:function(f){var c,b,d,a;for(var c=0;c<f.length;c++){d=f[c];d.items=[];d.hideImages=d.hasAttribute("data-bb-images")?(d.getAttribute("data-bb-images").toLowerCase()=="none"):false;if(!d.hideImages){d.imagePlaceholder=d.hasAttribute("data-bb-image-placeholder")?d.getAttribute("data-bb-image-placeholder"):undefined}d.headerJustify=d.hasAttribute("data-bb-header-justify")?d.getAttribute("data-bb-header-justify").toLowerCase():"center";d.listStyle=d.hasAttribute("data-bb-style")?d.getAttribute("data-bb-style").toLowerCase():"default";d.headerStyle=d.hasAttribute("data-bb-header-style")?d.getAttribute("data-bb-header-style").toLowerCase():"default";d.setAttribute("class","bb-pb-image-list");d.styleItem=function(n){var n,q,u,p,o,k,g,j,t,l,m,h,s,r;if(n.hasAttribute("data-bb-type")){q=n.getAttribute("data-bb-type").toLowerCase();u=n.innerHTML;p="";if(n.hasAttribute("data-bb-accent-text")){p=n.getAttribute("data-bb-accent-text")}if(q=="header"){o="bb-pb-image-list-header";k="bb-pb-image-list-header-hover bb10Highlight";if(d.headerStyle=="solid"){o=o+" bb-pb-image-list-header-solid bb10Accent"}else{o=o+" bb-pb-image-list-header-default"}if(this.headerJustify=="left"){o=o+" bb-pb-image-list-header-left";k=k+" bb-pb-image-list-header-left"}else{if(this.headerJustify=="right"){o=o+" bb-pb-image-list-header-right";k=k+" bb-pb-image-list-header-right"}else{o=o+" bb-"+res+"-image-list-header-center";k=k+" bb-pb-image-list-header-center"}}n.normal=o;n.highlight=k;n.innerHTML="<p>"+u+"</p>";n.setAttribute("class",o);n.ontouchstart=function(){this.setAttribute("class",this.highlight)};n.ontouchend=function(){this.setAttribute("class",this.normal)}}else{if(q=="item"){n.normal="bb-pb-image-list-item";n.highlight="bb-pb-image-list-item bb-pb-image-list-item-hover bb10Highlight";n.innerHTML="";n.setAttribute("class","bb-pb-image-list-item");n.ontouchstart=function(){this.setAttribute("class",this.highlight)};n.ontouchend=function(){this.setAttribute("class",this.normal)};if(!this.hideImages){m=document.createElement("img");n.img=m;if(this.imagePlaceholder){m.placeholder=this.imagePlaceholder;m.src=n.hasAttribute("data-bb-img")?n.getAttribute("data-bb-img"):this.imagePlaceholder;m.onerror=function(){if(this.src==this.placeholder){return}this.src=this.placeholder}}else{m.setAttribute("src",n.getAttribute("data-bb-img"))}n.appendChild(m)}g=document.createElement("div");n.appendChild(g);if(this.hideImages){g.normal="bb-pb-image-list-details bb-pb-image-list-noimage"}else{g.normal="bb-pb-image-list-details"}j=document.createElement("div");j.innerHTML=n.getAttribute("data-bb-title");j.className="title";n.titleDiv=j;g.appendChild(j);if(this.listStyle=="arrowlist"){g.normal=g.normal+" details-button-margin";h=document.createElement("div");n.appendChild(h);n.btn=h;h.setAttribute("class","button");s=document.createElement("div");s.normal="bb-pb-image-list-item-button-border";s.setAttribute("class",s.normal);h.appendChild(s);r=document.createElement("div");r.setAttribute("class","bb-pb-image-list-item-button-inner bb-image-list-item-chevron-light");s.appendChild(r)}else{l=document.createElement("div");l.innerHTML=p;l.className="accent-text";n.accentDiv=l;g.appendChild(l)}g.setAttribute("class",g.normal);t=document.createElement("div");t.className="description";n.descriptionDiv=t;g.appendChild(t);if(u.length==0){u="&nbsp;";t.style.visibilty="hidden";j.style["margin-top"]="19px";if(l){l.style["margin-top"]="-23px"}if(this.listStyle=="arrowlist"){h.style["margin-top"]="-69px"}}t.innerHTML=u;n.remove=function(){var w=this.parentNode,v=w.items.indexOf(this);this.parentNode.removeChild(this);w.items.splice(v,1);if(bb.scroller){bb.scroller.refresh()}};n.remove=n.remove.bind(n);n.trappedClick=n.onclick;n.onclick=undefined;n.outerElement=this;n.addEventListener("click",function(v){this.outerElement.selected=this;if(this.trappedClick){this.trappedClick()}},false);n.getTitle=function(){return this.titleDiv.innerHTML};n.getTitle=n.getTitle.bind(n);n.getDescription=function(){return this.descriptionDiv.innerHTML};n.getDescription=n.getDescription.bind(n);n.getAccentText=function(){return(this.accentDiv)?this.accentDiv.innerHTML:undefined};n.getAccentText=n.getAccentText.bind(n);n.getImage=function(){return(this.img)?this.img.getAttribute("src"):undefined};n.getImage=n.getImage.bind(n)}}}};d.styleItem=d.styleItem.bind(d);d.appendItem=function(g){this.styleItem(g);this.appendChild(g);this.items.push(g);if(bb.scroller){bb.scroller.refresh()}};d.appendItem=d.appendItem.bind(d);d.insertItemBefore=function(g,h){this.styleItem(g);this.insertBefore(g,h);this.items.splice(this.items.indexOf(h),0,g);if(bb.scroller){bb.scroller.refresh()}};d.insertItemBefore=d.insertItemBefore.bind(d);d.getItems=function(){var h,g=[];for(h=0;h<this.items.length;h++){g.push(this.items[h])}return g};d.getItems=d.getItems.bind(d);d.clear=function(){this.items=[];d.innerHTML="";if(bb.scroller){bb.scroller.refresh()}};d.clear=d.clear.bind(d);a=d.querySelectorAll("[data-bb-type=item], [data-bb-type=header]");var e;for(b=0;b<a.length;b++){e=a[b];d.styleItem(e);d.items.push(e)}}}};_bb10_imageList={apply:function(elements){var res=(bb.device.isPlayBook)?"lowres":"hires",i,j,outerElement,items;for(i=0;i<elements.length;i++){outerElement=elements[i];outerElement.items=[];outerElement.setAttribute("class","bb-bb10-image-list");outerElement.hideImages=outerElement.hasAttribute("data-bb-images")?(outerElement.getAttribute("data-bb-images").toLowerCase()=="none"):false;if(!outerElement.hideImages){outerElement.imageEffect=outerElement.hasAttribute("data-bb-image-effect")?outerElement.getAttribute("data-bb-image-effect").toLowerCase():undefined;outerElement.imagePlaceholder=outerElement.hasAttribute("data-bb-image-placeholder")?outerElement.getAttribute("data-bb-image-placeholder"):undefined}outerElement.listStyle=outerElement.hasAttribute("data-bb-style")?outerElement.getAttribute("data-bb-style").toLowerCase():"default";outerElement.solidHeader=outerElement.hasAttribute("data-bb-header-style")?(outerElement.getAttribute("data-bb-header-style").toLowerCase()=="solid"):false;outerElement.headerJustify=outerElement.hasAttribute("data-bb-header-justify")?outerElement.getAttribute("data-bb-header-justify").toLowerCase():"center";if(outerElement.hasAttribute("data-bb-context")&&outerElement.getAttribute("data-bb-context").toLowerCase()=="true"){outerElement.contextMenu=bb.screen.contextMenu}outerElement.styleItem=function(innerChildNode){if(innerChildNode.hasAttribute("data-bb-type")){var type=innerChildNode.getAttribute("data-bb-type").toLowerCase(),description=innerChildNode.innerHTML,title,overlay,accentText,img,details,detailsClass,descriptionDiv,btn,btnBorder,highlight,normal,btnInner;if(type=="header"){normal="bb-bb10-image-list-header bb-bb10-image-list-header-"+res;if(this.solidHeader){normal=normal+" bb10Accent";innerChildNode.style.color="white";innerChildNode.style["border-bottom-color"]="transparent"}else{normal=normal+" bb-bb10-image-list-header-normal-"+bb.screen.listColor;innerChildNode.style["border-bottom-color"]=bb.options.shades.darkOutline}if(this.headerJustify=="left"){normal=normal+" bb-bb10-image-list-header-left-"+res}else{if(this.headerJustify=="right"){normal=normal+" bb-bb10-image-list-header-right-"+res}else{normal=normal+" bb-bb10-image-list-header-center"}}innerChildNode.normal=normal;innerChildNode.innerHTML="<p>"+description+"</p>";innerChildNode.setAttribute("class",normal)}else{if(type=="item"){normal="bb-bb10-image-list-item bb-bb10-image-list-item-"+bb.screen.listColor+" bb-bb10-image-list-item-"+res;highlight=normal+" bb-bb10-image-list-item-hover bb10Highlight";innerChildNode.normal=normal;innerChildNode.highlight=highlight;innerChildNode.setAttribute("class",normal);innerChildNode.innerHTML="";if(!this.hideImages){img=document.createElement("img");img.outerElement=this;innerChildNode.img=img;if(this.imagePlaceholder){img.placeholder=this.imagePlaceholder;img.src=innerChildNode.hasAttribute("data-bb-img")?innerChildNode.getAttribute("data-bb-img"):this.imagePlaceholder}else{img.setAttribute("src",innerChildNode.getAttribute("data-bb-img"))}innerChildNode.appendChild(img);if(this.imageEffect){img.style.opacity="0.0";img.even=(j%2==0);img.onload=function(){this.show()};img.show=function(){this.style.opacity="1.0";if(this.even){this.style["-webkit-transition"]="opacity 0.5s linear"}else{this.style["-webkit-transition"]="opacity 1.0s linear"}this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]=1000;this.style["-webkit-transform"]="translate3d(0,0,0)"};img.show=img.show.bind(img)}if(this.imagePlaceholder){img.onerror=function(){if(this.src==this.placeholder){return}this.src=this.placeholder;if(this.outerElement.imageEffect){this.show()}}}}details=document.createElement("div");details.innerChildNode=innerChildNode;innerChildNode.details=details;innerChildNode.appendChild(details);detailsClass="bb-bb10-image-list-item-details-"+res;if(this.hideImages){detailsClass=detailsClass+" bb-bb10-image-list-item-noimage-"+res}title=document.createElement("div");title.setAttribute("class","title");title.innerHTML=innerChildNode.getAttribute("data-bb-title");details.title=title;if(title.innerHTML.length==0){title.innerHTML="&nbsp;"}details.appendChild(title);descriptionDiv=document.createElement("div");descriptionDiv.setAttribute("class","description");details.description=descriptionDiv;details.appendChild(descriptionDiv);overlay=document.createElement("div");overlay.setAttribute("class","bb-bb10-image-list-item-overlay-"+res);innerChildNode.appendChild(overlay);if((this.listStyle=="arrowlist")||(this.listStyle=="arrowbuttons")||(this.listStyle=="addbuttons")||(this.listStyle=="removebuttons")){btn=document.createElement("div");innerChildNode.appendChild(btn);innerChildNode.btn=btn;btn.outerElement=this;btn.innerChildNode=innerChildNode;if(innerChildNode.onbtnclick){btn.onbtnclick=innerChildNode.onbtnclick}else{if(innerChildNode.hasAttribute("onbtnclick")){innerChildNode.onbtnclick=innerChildNode.getAttribute("onbtnclick");btn.onbtnclick=function(){eval(this.innerChildNode.onbtnclick)}}}detailsClass=detailsClass+" details-button-margin";btn.setAttribute("class","button");btnBorder=document.createElement("div");btnBorder.normal="bb-bb10-image-list-item-button-border-"+res+" bb-bb10-image-list-item-button-"+bb.screen.listColor;btnBorder.setAttribute("class",btnBorder.normal);btn.btnBorder=btnBorder;btn.appendChild(btnBorder);btnInner=document.createElement("div");btnInner.normal="bb-bb10-image-list-item-button-inner-"+res;btnInner.highlight=btnInner.normal;btn.btnInner=btnInner;btnBorder.appendChild(btnInner);if(this.listStyle!=="arrowlist"){if(this.listStyle=="arrowbuttons"){btnInner.normal=btnInner.normal+" bb-image-list-item-chevron-"+bb.screen.listColor;btnInner.highlight=btnInner.highlight+" bb-image-list-item-chevron-dark"}else{if(this.listStyle=="addbuttons"){btnInner.normal=btnInner.normal+" bb-image-list-item-add-"+bb.screen.listColor;btnInner.highlight=btnInner.highlight+" bb-image-list-item-add-dark"}else{if(this.listStyle=="removebuttons"){btnInner.normal=btnInner.normal+" bb-image-list-item-remove-"+bb.screen.listColor;btnInner.highlight=btnInner.highlight+" bb-image-list-item-remove-dark"}}}btn.ontouchstart=function(){this.btnInner.setAttribute("class",this.btnInner.highlight);this.btnBorder.style.background="-webkit-gradient(linear, center top, center bottom, from(rgb("+(bb.options.shades.R+32)+","+(bb.options.shades.G+32)+","+(bb.options.shades.B+32)+")), to("+bb.options.highlightColor+"))"};btn.ontouchend=function(){this.btnBorder.style.background="";this.btnInner.setAttribute("class",this.btnInner.normal)};if(btn.onbtnclick){btn.onclick=function(e){e.stopPropagation();this.outerElement.selected=this.innerChildNode;this.onbtnclick()}}}else{btnInner.normal=btnInner.normal+" bb-image-list-item-chevron-"+bb.screen.listColor;btnBorder.style.background="transparent";btnBorder.style["border-color"]="transparent"}btnInner.setAttribute("class",btnInner.normal)}else{if(innerChildNode.hasAttribute("data-bb-accent-text")){accentText=document.createElement("div");accentText.setAttribute("class","accent-text");accentText.innerHTML=innerChildNode.getAttribute("data-bb-accent-text");details.appendChild(accentText);details.accentText=accentText}}if(description.length==0){description="&nbsp;";descriptionDiv.style.visibilty="hidden";title.style["margin-top"]=(bb.device.isPlayBook)?"17px":"18px";overlay.style["margin-top"]=(bb.device.isPlayBook)?"-73px":"-128px";if(accentText){accentText.style["margin-top"]=(bb.device.isPlayBook)?"-52px":"-82px"}}descriptionDiv.innerHTML=description;details.setAttribute("class",detailsClass);innerChildNode.fingerDown=false;innerChildNode.contextShown=false;innerChildNode.overlay=overlay;innerChildNode.contextMenu=this.contextMenu;innerChildNode.description=description;innerChildNode.title=title.innerHTML;innerChildNode.ontouchstart=function(){this.overlay.style["border-color"]=bb.options.shades.darkOutline;innerChildNode.fingerDown=true;innerChildNode.contextShown=false;if(innerChildNode.contextMenu){window.setTimeout(this.touchTimer,667)}};innerChildNode.ontouchend=function(event){this.overlay.style["border-color"]="transparent";innerChildNode.fingerDown=false;if(innerChildNode.contextShown){event.preventDefault();event.stopPropagation()}};innerChildNode.touchTimer=function(){if(innerChildNode.fingerDown){innerChildNode.contextShown=true;this.setAttribute("class",this.highlight);innerChildNode.contextMenu.hideEvents.push(this.finishHighlight);innerChildNode.contextMenu.peek({title:this.title,description:this.description,selected:this})}};innerChildNode.touchTimer=innerChildNode.touchTimer.bind(innerChildNode);innerChildNode.trappedClick=innerChildNode.onclick;innerChildNode.onclick=undefined;innerChildNode.outerElement=this;innerChildNode.addEventListener("click",function(e){this.setAttribute("class",this.highlight);this.outerElement.selected=this;if(this.trappedClick){setTimeout(this.trappedClick,0)}setTimeout(this.finishHighlight,250)},false);innerChildNode.finishHighlight=function(){if(bb.screen.animating){setTimeout(this.finishHighlight,250)}else{this.setAttribute("class",this.normal)}};innerChildNode.finishHighlight=innerChildNode.finishHighlight.bind(innerChildNode);innerChildNode.remove=function(){this.style.height="0px";this.style.opacity="0.0";this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="linear";this.style["-webkit-transform"]="translate3d(0,0,0)";if(bb.scroller){bb.scroller.refresh()}window.setTimeout(this.details.performRemove,100)};innerChildNode.remove=innerChildNode.remove.bind(innerChildNode);details.performRemove=function(){var listControl=this.innerChildNode.parentNode,index=listControl.items.indexOf(this.innerChildNode);listControl.removeChild(this.innerChildNode);listControl.items.splice(index,1)};details.performRemove=details.performRemove.bind(details);innerChildNode.getTitle=function(){return this.title};innerChildNode.getTitle=innerChildNode.getTitle.bind(innerChildNode);innerChildNode.getDescription=function(){return this.details.description.innerHTML};innerChildNode.getDescription=innerChildNode.getDescription.bind(innerChildNode);innerChildNode.getAccentText=function(){return(this.details.accentText)?this.details.accentText.innerHTML:undefined};innerChildNode.getAccentText=innerChildNode.getAccentText.bind(innerChildNode);innerChildNode.getImage=function(){return(this.img)?this.img.getAttribute("src"):undefined};innerChildNode.getImage=innerChildNode.getImage.bind(innerChildNode)}}}};outerElement.styleItem=outerElement.styleItem.bind(outerElement);outerElement.appendItem=function(item){this.styleItem(item);this.appendChild(item);this.items.push(item);if(bb.scroller){bb.scroller.refresh()}};outerElement.appendItem=outerElement.appendItem.bind(outerElement);outerElement.insertItemBefore=function(newItem,existingItem){this.styleItem(newItem);this.insertBefore(newItem,existingItem);this.items.splice(this.items.indexOf(existingItem),0,newItem);if(bb.scroller){bb.scroller.refresh()}};outerElement.insertItemBefore=outerElement.insertItemBefore.bind(outerElement);outerElement.getItems=function(){var i,result=[];for(i=0;i<this.items.length;i++){result.push(this.items[i])}return result};outerElement.getItems=outerElement.getItems.bind(outerElement);outerElement.clear=function(){this.items=[];outerElement.innerHTML="";if(bb.scroller){bb.scroller.refresh()}};outerElement.clear=outerElement.clear.bind(outerElement);items=outerElement.querySelectorAll("[data-bb-type=item], [data-bb-type=header]");var item;for(j=0;j<items.length;j++){item=items[j];outerElement.styleItem(item);outerElement.items.push(item)}}}};_bb10_activityIndicator={apply:function(a){var g,h,j,l,e=bb.screen.controlColor,k=(bb.device.isPlayBook)?"lowres":"hires",n,b,f;if(a.length>0){var d=document.createElement("canvas"),m,c;d.setAttribute("height","184px");d.setAttribute("width","184px");m=d.getContext("2d");m.beginPath();m.moveTo(92,154);m.arcTo(154,154,154,92,62);m.arcTo(154,30,92,30,62);m.arcTo(81,30,81,20,10);m.arcTo(81,10,91,10,10);m.arcTo(173,10,173,92,82);m.arcTo(173,173,92,173,82);m.arcTo(81,173,81,164,10);m.arcTo(81,154,92,154,10);m.closePath();m.strokeStyle="transparent";m.stroke();var c=m.createLinearGradient(0,50,0,154);c.addColorStop(0,"transparent");c.addColorStop(1,bb.options.highlightColor);m.fillStyle=c;m.fill();f=d.toDataURL()}for(g=0;g<a.length;g++){h=a[g];n=(h.hasAttribute("data-bb-size"))?h.getAttribute("data-bb-size").toLowerCase():"medium";if(n=="large"){b=(bb.device.isPlayBook)?"93px":"184px"}else{if(n=="small"){b=(bb.device.isPlayBook)?"21px":"41px"}else{n="medium";b=(bb.device.isPlayBook)?"46px":"93px"}}h.style.width=b;l=document.createElement("div");l.setAttribute("class","bb-bb10-activity-margin-"+k+" bb-bb10-activity-"+n+"-"+k+" bb-activity-"+e);h.appendChild(l);j=document.createElement("div");j.setAttribute("class","bb-bb10-activity-"+n+"-"+k);j.style["background-image"]='url("'+f+'")';l.appendChild(j);j.style["-webkit-animation-name"]="activity-rotate";j.style["-webkit-animation-duration"]="0.8s";j.style["-webkit-animation-iteration-count"]="infinite";j.style["-webkit-animation-timing-function"]="linear";h.show=function(){this.style.display="";bb.refresh()};h.show=h.show.bind(h);h.hide=function(){this.style.display="none";bb.refresh()};h.hide=h.hide.bind(h);h.remove=function(){this.parentNode.removeChild(this);bb.refresh()};h.remove=h.remove.bind(h);return h}}};_bbPlayBook_activityIndicator={apply:function(a){var g,h,j,k,e=bb.screen.controlColor,m,b,f;if(a.length>0){var d=document.createElement("canvas"),l,c;d.setAttribute("height","184px");d.setAttribute("width","184px");l=d.getContext("2d");l.beginPath();l.moveTo(92,154);l.arcTo(154,154,154,92,62);l.arcTo(154,30,92,30,62);l.arcTo(81,30,81,20,10);l.arcTo(81,10,91,10,10);l.arcTo(173,10,173,92,82);l.arcTo(173,173,92,173,82);l.arcTo(81,173,81,164,10);l.arcTo(81,154,92,154,10);l.closePath();l.strokeStyle="transparent";l.stroke();var c=l.createLinearGradient(0,50,0,154);c.addColorStop(0,"transparent");c.addColorStop(1,bb.options.highlightColor);l.fillStyle=c;l.fill();f=d.toDataURL()}for(g=0;g<a.length;g++){h=a[g];m=(h.hasAttribute("data-bb-size"))?h.getAttribute("data-bb-size").toLowerCase():"medium";if(m=="large"){b="93px"}else{if(m=="small"){b="21px"}else{m="medium";b="46px"}}h.style.width=b;k=document.createElement("div");k.setAttribute("class","bb-pb-activity-margin bb-pb-activity-"+m+" bb-activity-"+e);h.appendChild(k);j=document.createElement("div");j.setAttribute("class","bb-pb-activity-"+m);j.style["background-image"]='url("'+f+'")';k.appendChild(j);j.style["-webkit-animation-name"]="activity-rotate";j.style["-webkit-animation-duration"]="0.8s";j.style["-webkit-animation-iteration-count"]="infinite";j.style["-webkit-animation-timing-function"]="linear"}}};_bb10_grid={apply:function(m){var B=(bb.device.isPlayBook)?"lowres":"hires",n=false,l;for(var w=0;w<m.length;w++){var v,r,d,A,g,z,c=m[w];c.setAttribute("class","bb-bb10-grid-"+B);c.isSquare=(c.hasAttribute("data-bb-style")&&c.getAttribute("data-bb-style").toLowerCase()=="square");n=c.hasAttribute("data-bb-header-style")?(c.getAttribute("data-bb-header-style").toLowerCase()=="solid"):false;l=c.hasAttribute("data-bb-header-justify")?c.getAttribute("data-bb-header-justify").toLowerCase():"center";if(c.hasAttribute("data-bb-context")&&c.getAttribute("data-bb-context").toLowerCase()=="true"){z=bb.screen.contextMenu}r=c.querySelectorAll("[data-bb-type=group], [data-bb-type=row]");for(v=0;v<r.length;v++){g=r[v];if(g.hasAttribute("data-bb-type")){d=g.getAttribute("data-bb-type").toLowerCase();if(d=="group"&&g.hasAttribute("data-bb-title")){A=document.createElement("div");A.normal="bb-bb10-grid-header-"+B;A.innerHTML="<p>"+g.getAttribute("data-bb-title")+"</p>";if(n){A.normal=A.normal+" bb10Accent";A.style.color="white";A.style["border-bottom-color"]="transparent"}else{A.normal=A.normal+" bb-bb10-grid-header-normal-"+bb.screen.listColor;A.style["border-bottom-color"]=bb.options.shades.darkOutline}if(l=="left"){A.normal=A.normal+" bb-bb10-grid-header-left-"+B}else{if(l=="right"){A.normal=A.normal+" bb-bb10-grid-header-right-"+B}else{A.normal=A.normal+" bb-bb10-grid-header-center"}}A.setAttribute("class",A.normal);if(g.firstChild){g.insertBefore(A,g.firstChild)}else{g.appendChild(A)}}else{if(d=="row"){var u,y,b,f,o,h,e,q,x,e,p,s,a,t=g.querySelectorAll("[data-bb-type=item]");o=t.length;if(o==0){continue}y=document.createElement("table");y.style.width="100%";g.appendChild(y);b=document.createElement("tr");y.appendChild(b);for(u=0;u<o;u++){h=t[u];e=h.innerHTML;A=h.getAttribute("data-bb-title");a=(e||A);h.innerHTML="";f=document.createElement("td");b.appendChild(f);f.appendChild(h);s=(window.innerWidth/o)-6;if(c.isSquare){p=s}else{p=Math.ceil(s*0.5625)}h.style.width=s+"px";h.style.height=p+"px";q=document.createElement("img");q.setAttribute("src",h.getAttribute("data-bb-img"));q.style.height=p+"px";q.style.width=s+"px";h.image=q;h.appendChild(q);if(a){x=document.createElement("div");if(A&&e){x.setAttribute("class","bb-bb10-grid-item-overlay-"+B+" bb-bb10-grid-item-overlay-two-rows-"+B);x.innerHTML='<div><p class="title title-two-rows">'+A+"<br/>"+e+"</p></div>"}else{if(A){x.setAttribute("class","bb-bb10-grid-item-overlay-"+B+" bb-bb10-grid-item-overlay-one-row-"+B);x.innerHTML='<div><p class="title title-one-row">'+A+"</p></div>"}else{if(e){x.setAttribute("class","bb-bb10-grid-item-overlay-"+B+" bb-bb10-grid-item-overlay-one-row-"+B);x.innerHTML='<div><p class="title title-one-row">'+e+"</p></div>"}}}h.appendChild(x)}else{x=null}h.overlay=x;h.title=A;h.description=e;h.fingerDown=false;h.contextShown=false;h.contextMenu=z;h.ontouchstart=function(){if(this.overlay){this.overlay.setAttribute("style","opacity:1.0;background-color:"+bb.options.highlightColor+";")}h.fingerDown=true;h.contextShown=false;if(h.contextMenu){window.setTimeout(this.touchTimer,667)}};h.ontouchend=function(){if(this.overlay){this.overlay.setAttribute("style","")}h.fingerDown=false;if(h.contextShown){event.preventDefault();event.stopPropagation()}};h.touchTimer=function(){if(h.fingerDown){h.contextShown=true;h.contextMenu.peek({title:this.title,description:this.description,selected:this})}};h.touchTimer=h.touchTimer.bind(h)}}}}}c.orientationChanged=function(k){var G=this.querySelectorAll("[data-bb-type=row]"),F,E,I,H,D,C,J;for(F=0;F<G.length;F++){I=G[F].querySelectorAll("[data-bb-type=item]");H=I.length;for(E=0;E<H;E++){D=I[E];C=(window.innerWidth/H)-6;if(c.isSquare){J=C}else{J=Math.ceil(C*0.5625)}D.image.style.height=J+"px";D.image.style.width=C+"px";D.image.style["-webkit-transition-property"]="all";D.image.style["-webkit-transition-duration"]="0.2s";D.image.style["-webkit-transition-timing-function"]="linear";D.image.style["-webkit-transform"]="translate3d(0,0,0)";D.style.width=C+"px";D.style.height=J+"px";D.style["-webkit-transition-property"]="all";D.style["-webkit-transition-duration"]="0.2s";D.style["-webkit-transition-timing-function"]="linear";D.style["-webkit-transform"]="translate3d(0,0,0)"}}};c.orientationChanged=c.orientationChanged.bind(c);window.addEventListener("resize",c.orientationChanged,false)}}};_bb5_labelControlContainers={apply:function(f){for(var d=0;d<f.length;d++){var e=f[d];e.setAttribute("class","bb-label-control-horizontal-row");var a=e.querySelectorAll("[data-bb-type=label]");for(var c=0;c<a.length;c++){var b=a[c];b.setAttribute("class","bb-label")}}}};_bb_6_7_PlayBook_labelControlContainers={apply:function(a){for(var f=0;f<a.length;f++){var g=a[f];var k=g.querySelectorAll("[data-bb-type=row]");if(k.length>0){var n=document.createElement("table");n.setAttribute("class","bb-bb7-label-control-rows");g.insertBefore(n,k[0]);for(var d=0;d<k.length;d++){var o=k[d],l=document.createElement("tr");n.appendChild(l);var c=document.createElement("td");l.appendChild(c);var m=o.querySelectorAll("[data-bb-type=label]")[0];o.removeChild(m);c.appendChild(m);var b=document.createElement("td");l.appendChild(b);var e=o.querySelectorAll("[data-bb-type=button],input,[data-bb-type=dropdown],textarea")[0];o.removeChild(e);b.appendChild(e);g.removeChild(o);var h=e.getAttribute("data-bb-type");if(h=="button"||h=="dropdown"){e.style["float"]="right"}else{if(e.tagName=="INPUT"){e.style.width="100%"}}}}}}};_bb10_labelControlContainers={apply:function(a){var f,g,l,o,d,p,m,c,n,b,e,h,k=(bb.device.isPlayBook)?"lowres":"hires";for(f=0;f<a.length;f++){g=a[f];l=g.querySelectorAll("[data-bb-type=row]");if(l.length>0){o=document.createElement("table");o.setAttribute("class","bb-bb10-label-control-rows");g.insertBefore(o,l[0]);for(d=0;d<l.length;d++){p=l[d];m=document.createElement("tr");m.setAttribute("class","bb-bb10-label-control-label-row-"+k);o.appendChild(m);c=document.createElement("td");m.appendChild(c);n=p.querySelectorAll("[data-bb-type=label]")[0];n.setAttribute("class","bb-bb10-label-control-label-"+k);p.removeChild(n);c.appendChild(n);m=document.createElement("tr");o.appendChild(m);b=document.createElement("td");m.appendChild(b);e=p.querySelectorAll("[data-bb-type=button],input,[data-bb-type=dropdown],textarea")[0];p.removeChild(e);b.appendChild(e);g.removeChild(p)}}}}};_bb5_pillButtons={apply:function(f){for(var d=0;d<f.length;d++){var e=f[d];e.setAttribute("class","bb-pill-buttons");var a=e.querySelectorAll("[data-bb-type=pill-button]");for(var b=0;b<a.length;b++){var c=a[b];c.setAttribute("x-blackberry-focusable","true");var g=c.innerHTML;c.innerHTML="<span>"+g+"</span>";if(b===0){c.setAttribute("class","buttonLeft")}else{if(b==a.length-1){c.setAttribute("class","buttonRight")}else{c.setAttribute("class","buttonMiddle")}}if(c.hasAttribute("data-bb-selected")&&c.getAttribute("data-bb-selected").toLowerCase()=="true"){bb.pillButtons.selectButton(c)}c.onmousedown=function(){bb.pillButtons.selectButton(this);var k=this.parentNode.querySelectorAll("[data-bb-type=pill-button]");for(var j=0;j<k.length;j++){var h=k[j];if(h!=this){bb.pillButtons.deSelectButton(h)}}}}}}};_bb10_pillButtons={apply:function(a){var l=(bb.device.isPlayBook)?"lowres":"hires",e,f,o="bb-bb10-pill-buttons-container-"+l+" bb-bb10-pill-buttons-container-"+bb.screen.controlColor,m="bb-bb10-pill-button-"+l,n,g;for(e=0;e<a.length;e++){f=a[e];f.setAttribute("class","bb-bb10-pill-buttons-"+l);n=document.createElement("div");f.appendChild(n);n.setAttribute("class",o);var k=f.querySelectorAll("[data-bb-type=pill-button]"),d=Math.floor(100/k.length),h=101-(d*k.length),h,c,b;f.style["padding-left"]=h+"%";f.style["padding-right"]=h+"%";for(b=0;b<k.length;b++){c=k[b];n.appendChild(c);c.selected=m+" bb-bb10-pill-button-selected-"+l+"-"+bb.screen.controlColor;c.normal=m;c.highlight=m+" bb-bb10-pill-button-highlight-"+l+"-"+bb.screen.controlColor+" bb10Highlight";if(b==k.length-1){c.style["float"]="right";if(b==1){c.style.width=d-2+"%"}else{c.style.width=(100-b)-(b*d)+"%"}}else{c.style.width=d+"%"}g=document.createElement("div");g.normal="bb-bb10-pill-button-inner-"+l;g.selected=g.normal+" bb-bb10-pill-button-inner-selected-"+l+"-"+bb.screen.controlColor;g.innerHTML=c.innerHTML;c.innerHTML="";c.appendChild(g);if(c.getAttribute("data-bb-selected")=="true"){c.setAttribute("class",c.selected);g.setAttribute("class",g.selected)}else{c.setAttribute("class",c.normal);g.setAttribute("class",g.normal);c.ontouchstart=function(){this.setAttribute("class",this.highlight)};c.ontouchend=function(){this.setAttribute("class",this.normal)}}c.addEventListener("click",function(t){var s,p,q=this.parentNode.querySelectorAll("[data-bb-type=pill-button]");for(var r=0;r<q.length;r++){s=q[r];p=s.firstChild;if(s==this){s.setAttribute("class",s.selected);p.setAttribute("class",p.selected)}else{p.setAttribute("class",p.normal);s.setAttribute("class",s.normal);s.ontouchstart=function(){this.setAttribute("class",this.highlight)};s.ontouchend=function(){this.setAttribute("class",this.normal)}}}},false)}}}};_bb_6_7_PlayBook_pillButtons={apply:function(a){for(var f=0;f<a.length;f++){var g=a[f],n="bb-bb7-pill-buttons",m="";if(bb.device.isHiRes){n=n+" bb-bb7-pill-buttons-hires";m="bb-bb7-pill-button-hires"}else{n=n+" bb-bb7-pill-buttons-lowres";m="bb-bb7-pill-button-lowres"}g.setAttribute("class",n);var h,b,l=g.querySelectorAll("[data-bb-type=pill-button]"),e=Math.floor(98/l.length),k=102-(e*l.length);if(bb.device.isPlayBook){h="ontouchstart";b="ontouchend"}else{h="onmouseover";b="onmouseout"}g.style["padding-left"]=k+"%";g.style["padding-right"]=k+"%";for(var c=0;c<l.length;c++){var d=l[c];d.setAttribute("x-blackberry-focusable","true");if(c===0){if(d.getAttribute("data-bb-selected")=="true"){d.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+m)}else{d.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-left "+m);d.setAttribute(h,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+m+"')");d.setAttribute(b,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-left "+m+"')")}}else{if(c==l.length-1){if(d.getAttribute("data-bb-selected")=="true"){d.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+m)}else{d.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-right "+m);d.setAttribute(h,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+m+"')");d.setAttribute(b,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-right "+m+"')")}}else{if(d.getAttribute("data-bb-selected")=="true"){d.setAttribute("class","bb-bb7-pill-button-highlight "+m)}else{d.setAttribute("class","bb-bb7-pill-button "+m);d.setAttribute(h,"this.setAttribute('class','bb-bb7-pill-button-highlight "+m+"')");d.setAttribute(b,"this.setAttribute('class','bb-bb7-pill-button "+m+"')")}}}d.style.width=e+"%";d.addEventListener("click",function(t){var q,o,p=this.parentNode.querySelectorAll("[data-bb-type=pill-button]");if(bb.device.isPlayBook){q="ontouchstart";o="ontouchend"}else{q="onmouseover";o="onmouseout"}for(var r=0;r<p.length;r++){var s=p[r];if(r===0){if(s==this){s.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+m);s.onmouseover=null;s.onmouseout=null}else{s.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-left "+m);s.setAttribute(q,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+m+"')");s.setAttribute(o,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-left "+m+"')")}}else{if(r==p.length-1){if(s==this){s.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+m);s.onmouseover=null;s.onmouseout=null}else{s.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-right "+m);s.setAttribute(q,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+m+"')");s.setAttribute(o,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-right "+m+"')")}}else{if(s==this){s.setAttribute("class","bb-bb7-pill-button-highlight "+m);s.onmouseover=null;s.onmouseout=null}else{s.setAttribute("class","bb-bb7-pill-button "+m);s.setAttribute(q,"this.setAttribute('class','bb-bb7-pill-button-highlight "+m+"')");s.setAttribute(o,"this.setAttribute('class','bb-bb7-pill-button "+m+"')")}}}}},false)}}}};_bb_5_6_7_roundPanel={apply:function(a){for(var d=0;d<a.length;d++){var e=a[d];e.setAttribute("class","bb-round-panel");if(e.hasChildNodes()){var k=[],b=e.childNodes.length;for(var c=0;c<b;c++){k.push(e.childNodes[c])}for(var c=b-1;c>=0;c--){e.removeChild(e.childNodes[c])}var h=document.createElement("div");h.setAttribute("class","bb-round-panel-top-left bb-round-panel-background ");e.appendChild(h);h=document.createElement("div");h.setAttribute("class","bb-round-panel-top-right bb-round-panel-background ");e.appendChild(h);var g=document.createElement("div");g.setAttribute("class","bb-round-panel-inside");e.appendChild(g);h=document.createElement("div");h.setAttribute("class","bb-round-panel-bottom-left bb-round-panel-background ");e.appendChild(h);h=document.createElement("div");h.setAttribute("class","bb-round-panel-bottom-right bb-round-panel-background ");e.appendChild(h);for(var c=0;c<k.length;c++){g.appendChild(k[c])}}var f=e.querySelectorAll("[data-bb-type=panel-header]");for(var c=0;c<f.length;c++){f[c].setAttribute("class","bb-lowres-panel-header")}}}};_bb10_roundPanel={apply:function(f){if(bb.device.isBB10){var d,b,e,a,c;if(bb.device.isPlayBook){c="lowres"}else{c="hires"}for(d=0;d<f.length;d++){e=f[d];e.setAttribute("class","bb-bb10-round-panel-"+c+" bb-bb10-round-panel-light");a=e.querySelectorAll("[data-bb-type=panel-header]");for(b=0;b<a.length;b++){a[b].setAttribute("class","bb-bb10-panel-header-"+c+" bb-bb10-panel-header-"+c+"-light")}}}else{for(var d=0;d<f.length;d++){var e=f[d];e.setAttribute("class","bb-playbook-round-panel");var a=e.querySelectorAll("[data-bb-type=panel-header]");for(var b=0;b<a.length;b++){if(bb.device.isHiRes){a[b].setAttribute("class","bb-hires-panel-header")}else{a[b].setAttribute("class","bb-lowres-panel-header")}}}}}};_bbPlayBook_roundPanel={apply:function(e){for(var c=0;c<e.length;c++){var d=e[c];d.setAttribute("class","bb-playbook-round-panel");var a=d.querySelectorAll("[data-bb-type=panel-header]");for(var b=0;b<a.length;b++){if(bb.device.isHiRes){a[b].setAttribute("class","bb-hires-panel-header")}else{a[b].setAttribute("class","bb-lowres-panel-header")}}}}};bb.screen={scriptCounter:0,totalScripts:0,controlColor:"light",listColor:"light",overlay:null,tabOverlay:null,contextMenu:null,animating:false,apply:function(b){var c,k;bb.screen.contextMenu=null;if(bb.device.isBB10&&bb.device.isPlayBook){c="bb-bb10-lowres-screen"}else{if(bb.device.isBB10){c="bb-bb10-hires-screen"}else{if(bb.device.isHiRes){c="bb-hires-screen"}}}for(var g=0;g<b.length;g++){k=b[g];k.setAttribute("class",c);var m=k.querySelectorAll("[data-bb-type=menu]");if(m.length>0){m=m[0];bb.menuBar.apply(m,k)}if(bb.device.isBB10){var o=k.querySelectorAll("[data-bb-type=title]"),n=k.querySelectorAll("[data-bb-type=action-bar]"),d=k.querySelectorAll("[data-bb-type=context-menu]"),p,e,l=[],a=null,f,h=(bb.device.isPlayBook)?73:140,q=(bb.device.isPlayBook)?65:120;if(o.length>0){o=o[0]}else{o=null}if(n.length>0){n=n[0];k.actionBar=n}else{n=null}p=document.createElement("div");k.appendChild(p);if(!k.hasAttribute("data-bb-scroll-effect")||k.getAttribute("data-bb-scroll-effect").toLowerCase()!="off"){k.bbUIscrollWrapper=p}e=document.createElement("div");p.appendChild(e);for(f=0;f<k.childNodes.length-1;f++){a=k.childNodes[f];if((a!=n)&&(a!=m)&&(a!=o)){l.push(a)}}for(f=0;f<l.length-1;f++){e.appendChild(l[f])}if(o&&n){p.setAttribute("style","overflow:auto;position:absolute;bottom:"+h+"px;top:"+q+"px;left:0px;right:0px;")}else{if(o){p.setAttribute("style","overflow:auto;bottom:0px;position:absolute;top:"+q+"px;left:0px;right:0px;")}else{if(n){p.setAttribute("style","overflow:auto;position:absolute;bottom:"+h+"px;top:0px;left:0px;right:0px;")}else{p.setAttribute("style","overflow:auto;bottom:0px;position:absolute;top:0px;left:0px;right:0px;")}}}if(o){bb.titleBar.apply(o)}if(n){bb.actionBar.apply(n,k)}if(d.length>0){bb.screen.processContext(d[0],k)}else{d=null}}else{if(bb.device.isPlayBook){var o=k.querySelectorAll("[data-bb-type=title]"),p,e,l=[],a=null,f,n=k.querySelectorAll("[data-bb-type=action-bar]"),d=k.querySelectorAll("[data-bb-type=context-menu]");for(f=0;f<n.length;f++){n[f].style.display="none"}for(f=0;f<d.length;f++){d[f].style.display="none"}if(o.length>0){o=o[0]}else{o=null}p=document.createElement("div");k.appendChild(p);if(!k.hasAttribute("data-bb-scroll-effect")||k.getAttribute("data-bb-scroll-effect").toLowerCase()!="off"){k.bbUIscrollWrapper=p}e=document.createElement("div");p.appendChild(e);for(f=0;f<k.childNodes.length-1;f++){a=k.childNodes[f];if(a!=o){l.push(a)}}for(f=0;f<l.length-1;f++){e.appendChild(l[f])}if(o){p.setAttribute("style","overflow:auto;bottom:0px;position:absolute;top:55px;left:0px;right:0px;");bb.titleBar.apply(o)}else{p.setAttribute("style","overflow:auto;bottom:0px;position:absolute;top:0px;left:0px;right:0px;")}}else{var o=k.querySelectorAll("[data-bb-type=title]"),n=k.querySelectorAll("[data-bb-type=action-bar]"),d=k.querySelectorAll("[data-bb-type=context-menu]");for(f=0;f<n.length;f++){n[f].style.display="none"}for(f=0;f<d.length;f++){d[f].style.display="none"}if(o.length>0){o=o[0];bb.titleBar.apply(o)}}}k.refresh=function(){if(!bb.scroller){return}bb.scroller.refresh()};k.refresh=k.refresh.bind(k);k.scrollTo=function(j,r){if(bb.scroller){bb.scroller.scrollTo(j,r)}else{if(bb.device.isBB10){this.bbUIscrollWrapper.scrollTop=j}}};k.scrollTo=k.scrollTo.bind(k);k.scrollToElement=function(j){if(bb.scroller){bb.scroller.scrollToElement(j)}else{if(bb.device.isBB10){if(!j){return}this.scrollTo(j.offsetTop)}}};k.scrollToElement=k.scrollToElement.bind(k)}},processContext:function(c,a){a.appendChild(c);c.menu=bb.contextMenu.create(a);c.appendChild(c.menu);bb.screen.contextMenu=c.menu;var d=c.querySelectorAll("[data-bb-type=action]"),b;for(b=0;b<d.length;b++){c.menu.add(d[b])}c.menu.centerMenuItems()},fadeIn:function(a){var d=0.3,c="ease-out",b=a.style;b["-webkit-animation-name"]="bbUI-fade-in";b["-webkit-animation-duration"]=d+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},fadeOut:function(a){var d=0.3,c="ease-out",b=a.style;b["-webkit-animation-name"]="bbUI-fade-out";b["-webkit-animation-duration"]=d+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideLeft:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.width=bb.innerWidth()+"px";b["-webkit-animation-name"]="bbUI-slide-left";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideOutLeft:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.width=bb.innerWidth()+"px";b["-webkit-animation-name"]="bbUI-slide-out-left";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideRight:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.width=bb.innerWidth()+"px";b["-webkit-animation-name"]="bbUI-slide-right";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideOutRight:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.width=bb.innerWidth()+"px";b["-webkit-animation-name"]="bbUI-slide-out-right";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideUp:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.height=bb.innerHeight()+"px";b["-webkit-animation-name"]="bbUI-slide-up";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideOutUp:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.height=bb.innerHeight()+"px";b["-webkit-animation-name"]="bbUI-slide-out-up";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideDown:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.height=bb.innerHeight()+"px";b["-webkit-animation-name"]="bbUI-slide-down";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},slideOutDown:function(a){var d=0,e=0.3,c="ease-out",b=a.style;b.height=bb.innerHeight()+"px";b["-webkit-animation-name"]="bbUI-slide-out-down";b["-webkit-animation-duration"]=e+"s";b["-webkit-animation-timing-function"]=c;b["-webkit-transform"]="translate3d(0,0,0)";b["-webkit-backface-visibility"]="hidden"},reAdjustHeight:function(){if(bb.device.isBB5){document.body.style.height=screen.height-27+"px"}else{if(bb.device.isBB6){document.body.style.height=screen.height-17+"px"}else{if(bb.device.isBB7&&(navigator.appVersion.indexOf("Ripple")<0)){document.body.style.height=screen.height+"px"}}}}};_bb10_slider={apply:function(e){var d,b,c,a=bb.screen.controlColor,c=(bb.device.isPlayBook)?"lowres":"hires";for(d=0;d<e.length;d++){b=e[d];outerElement=document.createElement("div");outerElement.range=b;b.parentNode.insertBefore(outerElement,b);b.style.display="none";outerElement.appendChild(b);outerElement.minValue=b.hasAttribute("min")?parseInt(b.getAttribute("min")):0;outerElement.maxValue=b.hasAttribute("max")?parseInt(b.getAttribute("max")):0;outerElement.value=b.hasAttribute("value")?parseInt(b.getAttribute("value")):0;outerElement.step=b.hasAttribute("step")?parseInt(b.getAttribute("step")):0;outerElement.isActivated=false;outerElement.initialXPos=0;outerElement.currentXPos=0;outerElement.transientXPos=0;outerElement.className="bb-bb10-slider-"+c;outerElement.outer=document.createElement("div");outerElement.outer.setAttribute("class","outer bb-bb10-slider-outer-"+a);outerElement.appendChild(outerElement.outer);outerElement.fill=document.createElement("div");outerElement.fill.className="fill";outerElement.fill.active="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)";outerElement.fill.dormant="-webkit-linear-gradient(top, "+bb.options.highlightColor+" 0%, "+bb.options.shades.darkHighlight+" 100%)";outerElement.fill.style.background=outerElement.fill.dormant;outerElement.outer.appendChild(outerElement.fill);outerElement.inner=document.createElement("div");outerElement.inner.className="inner";outerElement.inner.outerElement=outerElement;outerElement.outer.appendChild(outerElement.inner);outerElement.halo=document.createElement("div");outerElement.halo.className="halo";outerElement.halo.style.background="-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 43, from(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), color-stop(0.8, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), to(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.7)))";outerElement.inner.appendChild(outerElement.halo);outerElement.indicator=document.createElement("div");outerElement.indicator.setAttribute("class","indicator bb-bb10-slider-indicator-"+a);outerElement.inner.appendChild(outerElement.indicator);b.outerElement=outerElement;b.setValue=function(j){var h=0,g,f;if(j&&(j<parseInt(this.outerElement.minValue)||j>parseInt(this.outerElement.maxValue))){return}else{if(j){this.outerElement.value=j;this.value=j;f=document.createEvent("HTMLEvents");f.initEvent("change",false,true);this.dispatchEvent(f)}}if(this.outerElement.value==this.outerElement.maxValue){h=1}else{h=this.outerElement.value/(parseInt(this.outerElement.maxValue)+parseInt(this.outerElement.minValue))}this.outerElement.currentXPos=Math.floor(parseInt(window.getComputedStyle(this.outerElement.outer).width)*h);this.outerElement.fill.style.width=this.outerElement.currentXPos+"px";this.outerElement.inner.style["-webkit-transform"]="translate3d("+this.outerElement.currentXPos+"px,0px,0px)"};b.setValue=b.setValue.bind(b);window.setTimeout(b.setValue,0);outerElement.inner.animateBegin=function(f){if(this.outerElement.isActivated===false){this.outerElement.isActivated=true;this.outerElement.initialXPos=f.touches[0].pageX;this.outerElement.halo.style["-webkit-transform"]="scale(1)";this.outerElement.halo.style["-webkit-animation-name"]="explode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-slider-indicator-"+a+" indicator-hover-"+a);this.outerElement.indicator.style.background="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)";this.outerElement.fill.style.background=this.outerElement.fill.active}};outerElement.inner.animateBegin=outerElement.inner.animateBegin.bind(outerElement.inner);outerElement.inner.addEventListener("touchstart",outerElement.inner.animateBegin,false);outerElement.inner.animateEnd=function(){if(this.outerElement.isActivated===true){this.outerElement.isActivated=false;this.outerElement.currentXPos=this.outerElement.transientXPos;this.outerElement.value=parseInt(this.outerElement.range.value);this.outerElement.halo.style["-webkit-transform"]="scale(0)";this.outerElement.halo.style["-webkit-animation-name"]="implode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-slider-indicator-"+a);this.outerElement.indicator.style.background="";this.outerElement.fill.style.background=this.outerElement.fill.dormant}};outerElement.inner.animateEnd=outerElement.inner.animateEnd.bind(outerElement.inner);outerElement.inner.addEventListener("touchend",outerElement.inner.animateEnd,false);outerElement.moveSlider=function(f){if(this.isActivated===true){f.stopPropagation();f.preventDefault();this.transientXPos=this.currentXPos+f.touches[0].pageX-this.initialXPos;this.transientXPos=Math.max(0,Math.min(this.transientXPos,parseInt(window.getComputedStyle(this.outer).width)));this.notifyUpdated();this.fill.style.width=this.transientXPos+"px";this.inner.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)"}};outerElement.moveSlider=outerElement.moveSlider.bind(outerElement);outerElement.notifyUpdated=function(){var g=this.transientXPos/parseInt(window.getComputedStyle(this.outer).width),h=Math.ceil((parseInt(this.minValue)+parseInt(this.maxValue))*g);if(Math.abs(h-parseInt(this.range.value))>this.step){this.range.value=h;var f=document.createEvent("HTMLEvents");f.initEvent("change",false,true);this.range.dispatchEvent(f)}};outerElement.notifyUpdated=outerElement.notifyUpdated.bind(outerElement);outerElement.doOrientationChange=function(){window.setTimeout(outerElement.range.setValue,0)};outerElement.doOrientationChange=outerElement.doOrientationChange.bind(outerElement);document.addEventListener("touchmove",outerElement.moveSlider,false);document.addEventListener("touchend",outerElement.inner.animateEnd,false);window.addEventListener("resize",outerElement.doOrientationChange,false)}}};_bb10_toggle={apply:function(elements){var i,res,table,tr,td,color=bb.screen.controlColor,res=(bb.device.isPlayBook)?"lowres":"hires";for(i=0;i<elements.length;i++){outerElement=elements[i];outerElement.checked=false;outerElement.buffer=(bb.device.isPlayBook)?35:70;outerElement.isActivated=false;outerElement.initialXPos=0;outerElement.currentXPos=0;outerElement.transientXPos=0;outerElement.movedWithSlider=false;outerElement.startValue=false;outerElement.className="bb-bb10-toggle-"+res;outerElement.outer=document.createElement("div");outerElement.outer.setAttribute("class","outer bb-bb10-toggle-outer-"+color);outerElement.appendChild(outerElement.outer);outerElement.fill=document.createElement("div");outerElement.fill.className="fill";outerElement.fill.style.background=outerElement.fill.dormant;outerElement.outer.appendChild(outerElement.fill);outerElement.inner=document.createElement("div");outerElement.inner.className="inner";outerElement.inner.outerElement=outerElement;outerElement.fill.appendChild(outerElement.inner);table=document.createElement("table");table.className="table";tr=document.createElement("tr");table.appendChild(tr);outerElement.inner.appendChild(table);td=document.createElement("td");td.className="left";tr.appendChild(td);outerElement.yes=document.createElement("div");outerElement.yes.className="yes";outerElement.yes.innerHTML=outerElement.getAttribute("data-bb-on");td.appendChild(outerElement.yes);td=document.createElement("td");td.className="center";tr.appendChild(td);td=document.createElement("td");td.className="right";tr.appendChild(td);outerElement.no=document.createElement("div");outerElement.no.className="no";outerElement.no.innerHTML=outerElement.getAttribute("data-bb-off");td.appendChild(outerElement.no);outerElement.container=document.createElement("div");outerElement.container.className="indicator-container";outerElement.appendChild(outerElement.container);outerElement.halo=document.createElement("div");outerElement.halo.className="halo";outerElement.halo.style.background="-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 43, from(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), color-stop(0.8, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), to(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.7)))";outerElement.container.appendChild(outerElement.halo);outerElement.indicator=document.createElement("div");outerElement.indicator.setAttribute("class","indicator bb-bb10-toggle-indicator-"+color);outerElement.container.appendChild(outerElement.indicator);if(outerElement.hasAttribute("onchange")){outerElement.onchangeEval=outerElement.getAttribute("onchange");outerElement.onchange=function(){eval(this.onchangeEval)}}outerElement.inner.animateBegin=function(event){if(this.outerElement.isActivated===false){this.outerElement.startValue=this.outerElement.checked;this.outerElement.movedWithSlider=false;this.outerElement.isActivated=true;this.outerElement.initialXPos=event.touches[0].pageX;this.outerElement.halo.style["-webkit-transform"]="scale(1)";this.outerElement.halo.style["-webkit-animation-name"]="explode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-toggle-indicator-"+color+" indicator-hover-"+color);this.outerElement.indicator.style.background="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)"}};outerElement.inner.animateBegin=outerElement.inner.animateBegin.bind(outerElement.inner);outerElement.inner.addEventListener("touchstart",outerElement.inner.animateBegin,false);outerElement.container.addEventListener("touchstart",outerElement.inner.animateBegin,false);outerElement.inner.animateEnd=function(){if(this.outerElement.isActivated===true){this.outerElement.isActivated=false;this.outerElement.currentXPos=this.outerElement.transientXPos;this.outerElement.halo.style["-webkit-transform"]="scale(0)";this.outerElement.halo.style["-webkit-animation-name"]="implode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-toggle-indicator-"+color);this.outerElement.indicator.style.background="";this.outerElement.positionButton();if(this.outerElement.movedWithSlider){if(this.outerElement.startValue!=this.outerElement.checked){if(this.outerElement.onchange){this.outerElement.onchange()}}}}};outerElement.inner.animateEnd=outerElement.inner.animateEnd.bind(outerElement.inner);outerElement.addEventListener("touchend",outerElement.inner.animateEnd,false);outerElement.moveToggle=function(event){if(this.isActivated===true){this.movedWithSlider=true;event.stopPropagation();event.preventDefault();var endPos=parseInt(window.getComputedStyle(this.fill).width)-this.buffer,percent;this.transientXPos=this.currentXPos+event.touches[0].pageX-this.initialXPos;this.transientXPos=Math.max(0,Math.min(this.transientXPos,endPos));this.inner.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)";this.container.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)";percent=this.transientXPos/endPos;this.checked=(percent>0.5)}};outerElement.moveToggle=outerElement.moveToggle.bind(outerElement);outerElement.doClick=function(){if(!this.movedWithSlider){this.setChecked(!this.checked)}};outerElement.doClick=outerElement.doClick.bind(outerElement);outerElement.addEventListener("click",outerElement.doClick,false);outerElement.positionButton=function(){var location=(this.checked)?parseInt(window.getComputedStyle(this.fill).width)-this.buffer:0;this.inner.style["-webkit-transform"]="translate3d("+location+"px,0px,0px)";this.inner.style["-webkit-transition-duration"]="0.1s";this.inner.style["-webkit-transition-timing-function"]="linear";this.inner.addEventListener("webkitTransitionEnd",function(){this.style["-webkit-transition"]=""});this.container.style["-webkit-transform"]="translate3d("+location+"px,0px,0px)";this.container.style["-webkit-transition-duration"]="0.1s";this.container.style["-webkit-transition-timing-function"]="linear";this.container.addEventListener("webkitTransitionEnd",function(){this.style["-webkit-transition"]=""});if(this.checked){this.indicator.style["background-image"]="-webkit-linear-gradient(top, "+bb.options.highlightColor+" 0%, "+bb.options.shades.darkHighlight+" 100%)"}else{this.indicator.style["background-image"]=""}this.currentXPos=location};outerElement.positionButton=outerElement.positionButton.bind(outerElement);outerElement.setChecked=function(value){if(value!=this.checked){this.checked=value;if(this.onchange){this.onchange()}}this.positionButton()};outerElement.setChecked=outerElement.setChecked.bind(outerElement);outerElement.getChecked=function(){return this.checked};outerElement.getChecked=outerElement.getChecked.bind(outerElement);outerElement.checked=(outerElement.hasAttribute("data-bb-checked"))?outerElement.getAttribute("data-bb-checked").toLowerCase()=="true":false;setTimeout(outerElement.positionButton,0);document.addEventListener("touchmove",outerElement.moveToggle,false);document.addEventListener("touchend",outerElement.inner.animateEnd,false)}}};_bb_progress={NORMAL:0,PAUSED:1,ERROR:2,apply:function(a){var f,b,h,c,k,e,g=0,j=1,d=2;if(bb.device.isBB10){h=(bb.device.isPlayBook)?"lowres":"hires",c=bb.screen.controlColor;k=bb.options.highlightColor;e=bb.options.shades.darkHighlight}else{h="lowres";c="light";k=(bb.device.isPlayBook)?bb.options.highlightColor:"#92B43B";e="#8FB03B"}for(f=0;f<a.length;f++){b=a[f];outerElement=document.createElement("div");outerElement.progress=b;outerElement.state=bb.progress.NORMAL;b.parentNode.insertBefore(outerElement,b);b.style.display="none";outerElement.appendChild(b);outerElement.maxValue=b.hasAttribute("max")?parseInt(b.getAttribute("max")):0;outerElement.value=b.hasAttribute("value")?parseInt(b.getAttribute("value")):0;outerElement.className="bb-progress";outerElement.outer=document.createElement("div");outerElement.outer.setAttribute("class","outer bb-progress-outer-"+c+" bb-progress-outer-idle-background-"+c);outerElement.appendChild(outerElement.outer);outerElement.fill=document.createElement("div");if(bb.device.isBB10){outerElement.fill.normal="bb-progress-fill bb10Highlight"}else{outerElement.fill.normal="bb-progress-fill bbProgressHighlight"}outerElement.fill.setAttribute("class",outerElement.fill.normal);outerElement.outer.appendChild(outerElement.fill);outerElement.inner=document.createElement("div");outerElement.inner.className="inner";outerElement.outer.appendChild(outerElement.inner);b.outerElement=outerElement;b.setValue=function(o){var n=0,m,l;if((o&&(o<0))||(o&&(o>parseInt(this.outerElement.maxValue)))){return}else{if(o){this.outerElement.value=o;this.value=o}else{if(o==0){this.outerElement.value=0;this.value=0}else{o=parseInt(this.outerElement.value)}}}if(o==this.outerElement.maxValue){this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from("+e+"), to("+k+"))";n=1}else{if(o==0){this.outerElement.outer.setAttribute("class","outer bb-progress-outer-"+c+" bb-progress-outer-idle-background-"+c)}else{if(this.outerElement.state==bb.progress.PAUSED){this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from(#EDC842), to(#BA991E))"}else{if(this.outerElement.state==bb.progress.ERROR){this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from( #E04242), to(#D91111))"}else{this.outerElement.outer.setAttribute("class","outer bb-progress-outer-"+c);this.outerElement.fill.setAttribute("class",this.outerElement.fill.normal);this.outerElement.fill.style.background=""}}n=(this.outerElement.value/parseInt(this.outerElement.maxValue))}}l=Math.floor(parseInt(window.getComputedStyle(this.outerElement.outer).width)*n);this.outerElement.fill.style.width=l+"px"};b.setValue=b.setValue.bind(b);b.setState=function(l){this.outerElement.state=l;this.setValue()};b.setState=b.setState.bind(b);window.setTimeout(b.setValue,0);outerElement.doOrientationChange=function(){window.setTimeout(this.progress.setValue,0)};outerElement.doOrientationChange=outerElement.doOrientationChange.bind(outerElement);window.addEventListener("resize",outerElement.doOrientationChange,false)}}};bb.titleBar={apply:function(titleBar){if(bb.device.isBB10){var res=(bb.device.isPlayBook)?"lowres":"hires",button,caption,details,topTitleArea=document.createElement("div"),img,accentText;titleBar.topTitleArea=topTitleArea;titleBar.appendChild(topTitleArea);topTitleArea.setAttribute("class","bb-bb10-title-bar-"+res+" bb-bb10-title-bar-"+bb.screen.controlColor);caption=document.createElement("div");titleBar.caption=caption;caption.setAttribute("class","bb-bb10-title-bar-caption-"+res);caption.innerHTML=titleBar.getAttribute("data-bb-caption");topTitleArea.appendChild(caption);if(titleBar.hasAttribute("data-bb-back-caption")){button=document.createElement("div");button.innerHTML=titleBar.getAttribute("data-bb-back-caption");topTitleArea.appendChild(button);titleBar.backButton=button;button.onclick=bb.popScreen;bb.titleBar.styleBB10Button(button);button.style.left="0px"}if(titleBar.hasAttribute("data-bb-action-caption")){button=document.createElement("div");button.innerHTML=titleBar.getAttribute("data-bb-action-caption");if(titleBar.hasAttribute("onactionclick")){button.titleBar=titleBar;button.onactionclick=titleBar.getAttribute("onactionclick");titleBar.onactionclick=function(){eval(this.actionButton.onactionclick)};button.onclick=function(){if(this.titleBar.onactionclick){this.titleBar.onactionclick()}}}else{if(titleBar.onactionclick){button.onclick=onactionclick}}bb.titleBar.styleBB10Button(button);button.style.right="0px";topTitleArea.appendChild(button);titleBar.actionButton=button}if(titleBar.actionButton&&titleBar.backButton){titleBar.evenButtonWidths=function(){var backWidth=parseInt(window.getComputedStyle(this.backButton).width),actionWidth=parseInt(window.getComputedStyle(this.actionButton).width);if(backWidth>actionWidth){this.actionButton.style.width=backWidth+"px"}else{this.backButton.style.width=actionWidth+"px"}};titleBar.evenButtonWidths=titleBar.evenButtonWidths.bind(titleBar);window.setTimeout(titleBar.evenButtonWidths,0)}if((!titleBar.actionButton&&!titleBar.backButton)&&(titleBar.hasAttribute("data-bb-img")||titleBar.hasAttribute("data-bb-accent-text"))){caption.setAttribute("class","bb-bb10-title-bar-caption-left-"+res);details=document.createElement("div");titleBar.details=details;topTitleArea.appendChild(details);details.appendChild(caption);if(titleBar.hasAttribute("data-bb-img")){img=document.createElement("img");img.src=titleBar.getAttribute("data-bb-img");titleBar.img=img;topTitleArea.insertBefore(img,details);details.setAttribute("class","bb-bb10-title-bar-caption-details-img-"+res)}if(titleBar.hasAttribute("data-bb-accent-text")){caption.style["line-height"]=bb.device.isPlayBook?"40px":"70px";accentText=document.createElement("div");accentText.setAttribute("class","bb-bb10-title-bar-accent-text-"+res);titleBar.accentText=accentText;accentText.innerHTML=titleBar.getAttribute("data-bb-accent-text");details.appendChild(accentText)}}titleBar.setCaption=function(value){this.caption.innerHTML=value};titleBar.setCaption=titleBar.setCaption.bind(titleBar);titleBar.getCaption=function(){return this.caption.innerHTML};titleBar.getCaption=titleBar.getCaption.bind(titleBar);titleBar.setBackCaption=function(value){this.backButton.firstChild.innerHTML=value;if(this.actionButton){this.backButton.style.width="";this.evenButtonWidths()}};titleBar.setBackCaption=titleBar.setBackCaption.bind(titleBar);titleBar.getBackCaption=function(){return this.backButton.firstChild.innerHTML};titleBar.getBackCaption=titleBar.getBackCaption.bind(titleBar);titleBar.setActionCaption=function(value){this.actionButton.firstChild.innerHTML=value;if(this.backButton){this.actionButton.style.width="";this.evenButtonWidths()}};titleBar.setActionCaption=titleBar.setActionCaption.bind(titleBar);titleBar.getActionCaption=function(){return this.actionButton.firstChild.innerHTML};titleBar.getActionCaption=titleBar.getActionCaption.bind(titleBar)}else{if(bb.device.isPlayBook){titleBar.setAttribute("class","pb-title-bar");titleBar.innerHTML=titleBar.getAttribute("data-bb-caption");if(titleBar.hasAttribute("data-bb-back-caption")){var button=document.createElement("div"),buttonInner=document.createElement("div");button.setAttribute("class","pb-title-bar-back");button.onclick=bb.popScreen;buttonInner.setAttribute("class","pb-title-bar-back-inner");buttonInner.innerHTML=titleBar.getAttribute("data-bb-back-caption");button.appendChild(buttonInner);titleBar.appendChild(button)}}else{if(titleBar.hasAttribute("data-bb-caption")){if(bb.device.isHiRes){titleBar.setAttribute("class","bb-hires-screen-title")}else{titleBar.setAttribute("class","bb-lowres-screen-title")}titleBar.innerHTML=titleBar.getAttribute("data-bb-caption")}}}},styleBB10Button:function(b){var a=(bb.device.isPlayBook)?"lowres":"hires",c=document.createElement("div");normal="bb-bb10-titlebar-button bb-bb10-titlebar-button-"+a,highlight="bb-bb10-titlebar-button bb-bb10-titlebar-button-"+a+" bb-bb10-titlebar-button-highlight-"+bb.screen.controlColor+" bb10Highlight",outerNormal="bb-bb10-titlebar-button-container-"+a+" bb-bb10-titlebar-button-container-"+bb.screen.controlColor;b.enabled=true;c.innerHTML=b.innerHTML;b.innerHTML="";b.appendChild(c);normal=normal+" bb-bb10-titlebar-button-"+bb.screen.controlColor;c.setAttribute("class",normal);b.setAttribute("class",outerNormal);b.outerNormal=outerNormal;b.innerElement=c;c.normal=normal;c.highlight=highlight;b.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)};b.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)};b.trappedClick=b.onclick;b.onclick=undefined;if(b.trappedClick!==null){b.addEventListener("click",function(d){if(this.enabled){this.trappedClick()}},false)}}};bb.actionBar={color:"",apply:function(E,d){var n=E.querySelectorAll("[data-bb-type=action]"),e=[],o=[],b=[],l=[],x=[],s,G,A,w,h,v,f,B=E,m,H=(bb.device.isPlayBook)?"lowres":"hires",z,r=bb.actionBar.color,u;E.backBtnWidth=0;E.actionOverflowBtnWidth=0;E.tabOverflowBtnWidth=0;E.setAttribute("class","bb-bb10-action-bar-"+H+" bb-bb10-action-bar-"+bb.actionBar.color);E.visibleTabs=b;E.visibleButtons=e;E.overflowButtons=o;E.shownActions=x;E.overflowTabs=l;for(u=0;u<n.length;u++){s=n[u];if(s.hasAttribute("data-bb-style")){w=s.getAttribute("data-bb-style").toLowerCase();if(w=="button"){if(s.hasAttribute("data-bb-overflow")&&(s.getAttribute("data-bb-overflow").toLowerCase()=="true")){o.push(s)}else{e.push(s)}}else{if(s.hasAttribute("data-bb-overflow")&&(s.getAttribute("data-bb-overflow").toLowerCase()=="true")){l.push(s)}else{b.push(s)}}}}if(E.hasAttribute("data-bb-back-caption")&&E.querySelectorAll("[data-bb-style=tab]").length==0){var g,c,F;f=document.createElement("div");f.setAttribute("class","bb-bb10-action-bar-back-button-"+H+" bb-bb10-action-bar-back-button-"+H+"-"+r);f.onclick=bb.popScreen;E.backBtn=f;g=document.createElement("div");g.setAttribute("class","bb-bb10-action-bar-back-chevron-"+H+"-"+r);f.appendChild(g);c=document.createElement("div");c.setAttribute("class","bb-bb10-action-bar-back-text-"+H);c.innerHTML=E.getAttribute("data-bb-back-caption");f.appendChild(c);F=document.createElement("div");F.setAttribute("class","bb-bb10-action-bar-back-slash-"+H+"-"+r);var y=document.createElement("table"),a=document.createElement("tr"),k=document.createElement("td");E.appendChild(y);y.appendChild(a);y.setAttribute("class","bb-bb10-action-bar-table");if(bb.device.isPlayBook){E.backBtnWidth=93;k.style.width=77+"px"}else{E.backBtnWidth=187;k.style.width=154+"px"}a.appendChild(k);k.appendChild(f);k=document.createElement("td");k.style.width=bb.device.isPlayBook?16+"px":33+"px";F.style["background-color"]=bb.options.shades.darkOutline;a.appendChild(k);k.appendChild(F);k=document.createElement("td");k.style.width="100%";a.appendChild(k);B=k;for(u=0;u<n.length;u++){s=n[u];k.appendChild(s)}}if(l.length>0){E.tabOverflowBtnWidth=(bb.device.isPlayBook)?77:154;E.tabOverflowMenu=bb.tabOverflow.create(d);E.tabOverflowMenu.actionBar=E;s=document.createElement("div");s.actionBar=E;s.tabOverflowMenu=E.tabOverflowMenu;s.setAttribute("data-bb-type","action");s.setAttribute("data-bb-style","tab");s.setAttribute("data-bb-img","overflow");s.onclick=function(){this.tabOverflowMenu.show()};E.tabOverflowBtn=s;B.insertBefore(s,B.firstChild);b.push(s)}if(o.length>0){E.actionOverflowBtnWidth=(bb.device.isPlayBook)?77:154;E.menu=bb.contextMenu.create(d);E.appendChild(E.menu);s=document.createElement("div");s.menu=E.menu;E.moreBtn=s;s.setAttribute("data-bb-type","action");s.setAttribute("data-bb-style","button");s.setAttribute("data-bb-img","overflow");s.onclick=function(){this.menu.show()};B.appendChild(s);e.push(s)}E.getUsableWidth=function(){return bb.innerWidth()-this.backBtnWidth-this.actionOverflowBtnWidth-this.tabOverflowBtnWidth};E.getUsableWidth=E.getUsableWidth.bind(E);E.calculateActionWidths=function(){var I,J,K=0,j=this.getUsableWidth(),L=this.visibleButtons.length+this.visibleTabs.length;J=(this.moreBtn)?L-1:L;J=(this.tabOverflowBtn)?J-1:J;K=(this.moreBtn)?K+1:K;K=(this.tabOverflowBtn)?K+1:K;K=(this.backBtn)?K+1:K;if((K+J)<5){I=Math.floor(j/J)}else{I=Math.floor(j/(5-K))}return I};E.calculateActionWidths=E.calculateActionWidths.bind(E);m=E.calculateActionWidths();E.orientationChanged=function(L){var K=E.calculateActionWidths(),I,M,j,J=this.shownActions.length,N=2;for(I=0;I<J;I++){M=this.shownActions[I];j=(M.hasAttribute("data-bb-style"))?M.getAttribute("data-bb-style").toLowerCase():"button";N=(j=="tab")?2:0;M.style.width=(K-N)+"px"}if(this.moreBtn&&(this.shownActions.length>0)){if(j=="tab"){this.moreBtn.style.width=(bb.innerWidth()-(this.shownActions.length*K))+"px"}else{this.moreBtn.style.width=this.actionOverflowBtnWidth+"px"}}};E.orientationChanged=E.orientationChanged.bind(E);window.addEventListener("orientationchange",E.orientationChanged,false);if(l.length>0){var C;for(u=0;u<b.length;u++){s=b[u];if(s.getAttribute("data-bb-img")!="overflow"){C=s.cloneNode(true);C.visibleTab=s;C.res=H;C.actionBar=E;E.tabOverflowMenu.add(C)}}for(u=0;u<l.length;u++){s=l[u];s.res=H;s.actionBar=E;E.tabOverflowMenu.add(s)}}for(u=0;u<o.length;u++){s=o[u];s.res=H;E.menu.add(s)}var q=2,D=b.length,t;for(u=0;u<D;u++){s=b[u];if(u>4){s.style.display="none";continue}s.res=H;A=s.innerHTML;if((u==b.length-1)&&(u==4)){s.style.width=(E.getUsableWidth()-(4*m)-q)+"px"}else{s.style.width=(m-q)+"px"}s.actionBar=E;s.innerHTML="";s.normal="bb-bb10-action-bar-action-"+H+" bb-bb10-action-bar-tab-"+r+" bb-bb10-action-bar-tab-normal-"+r;s.highlight=s.normal+" bb-bb10-action-bar-tab-selected-"+r;s.setAttribute("class",s.normal);z=document.createElement("img");z.setAttribute("class","bb-bb10-action-bar-icon-"+H);s.appendChild(z);t=document.createElement("div");t.setAttribute("class","bb-bb10-action-bar-action-display-"+H);t.innerHTML=A;s.display=t;s.appendChild(t);if(s.getAttribute("data-bb-img")=="overflow"){s.style.width=E.tabOverflowBtnWidth+"px";s.icon=z;t.innerHTML="&nbsp;";s.display=t;z.setAttribute("src",bb.transparentPixel);z.normal="bb-bb10-action-bar-icon-"+H+" bb-bb10-action-bar-tab-overflow-"+H+"-"+r;z.highlight="bb-bb10-action-bar-icon-"+H;z.setAttribute("class",z.normal);s.tabHighlight=document.createElement("div");s.tabHighlight.setAttribute("class","bb-bb10-action-bar-tab-overflow-"+H+"-"+r+" bb-bb10-action-bar-tab-overflow-highlight-"+H);s.appendChild(s.tabHighlight);s.style.width=(E.tabOverflowBtnWidth-1)+"px";s.reset=function(){this.icon.setAttribute("src",bb.transparentPixel);this.icon.setAttribute("class",this.icon.normal);this.tabHighlight.style.display="none";this.display.innerHTML="&nbsp;"};s.reset=s.reset.bind(s)}else{x.push(s);z.setAttribute("src",s.getAttribute("data-bb-img"));s.icon=z;if(s.hasAttribute("data-bb-selected")&&(s.getAttribute("data-bb-selected").toLowerCase()=="true")){bb.actionBar.highlightAction(s)}s.addEventListener("click",function(j){bb.actionBar.highlightAction(this)},false);s.setCaption=function(J){this.display.innerHTML=J;if(this.actionBar.tabOverflowMenu){var I=this.actionBar.tabOverflowMenu.actions,j,K;for(j=0;j<I.length;j++){K=I[j];if(K.visibleTab==this){K.setCaption(J)}}}};s.setCaption=s.setCaption.bind(s);s.setImage=function(J){this.icon.setAttribute("src",J);if(this.actionBar.tabOverflowMenu){var I=this.actionBar.tabOverflowMenu.actions,j,K;for(j=0;j<I.length;j++){K=I[j];if(K.visibleTab==this){K.setImage(J)}}}};s.setImage=s.setImage.bind(s)}if((u==b.length-1)&&(u<4)){s.style["border-right-width"]="1px"}}h=(b.length>0)?"tab":"button";for(u=0;u<e.length;u++){s=e[u];s.res=H;A=s.innerHTML;if((((D+u)>4))||(E.backBtn&&(u>3))){s.style.display="none";continue}z=document.createElement("img");if(s.getAttribute("data-bb-img")=="overflow"){z.setAttribute("src",bb.transparentPixel);z.setAttribute("class","bb-bb10-action-bar-icon-"+H+" bb-bb10-action-bar-overflow-button-"+H+"-"+r);var p=false;if((h=="tab")&&E.tabOverflowMenu&&(b.length==1)&&(e.length==1)){p=false}else{if(h=="tab"){p=true}}if(p){s.style.width=(E.tabOverflowMenu)?(bb.innerWidth()-((D-1)*m)-E.tabOverflowBtnWidth)+"px":(bb.innerWidth()-(D*m)-E.tabOverflowBtnWidth)+"px";s.normal="bb-bb10-action-bar-action-"+H+" bb-bb10-action-bar-button-"+r+" bb-bb10-action-bar-button-tab-left-"+H+"-"+r}else{s.style.width=(E.actionOverflowBtnWidth-1)+"px";s.style["float"]="right";s.normal="bb-bb10-action-bar-action-"+H+" bb-bb10-action-bar-button-"+r}}else{x.push(s);z.setAttribute("src",s.getAttribute("data-bb-img"));z.setAttribute("class","bb-bb10-action-bar-icon-"+H);s.icon=z;s.style.width=m+"px";if(h=="tab"){s.normal="bb-bb10-action-bar-action-"+H+" bb-bb10-action-bar-button-"+r+" bb-bb10-action-bar-button-tab-left-"+H+"-"+r}else{s.normal="bb-bb10-action-bar-action-"+H+" bb-bb10-action-bar-button-"+r}s.setCaption=function(j){this.display.innerHTML=j};s.setCaption=s.setCaption.bind(s);s.setImage=function(j){this.icon.setAttribute("src",j)};s.setImage=s.setImage.bind(s)}s.innerHTML="";s.setAttribute("class",s.normal);s.appendChild(z);h="button";var t=document.createElement("div");t.setAttribute("class","bb-bb10-action-bar-action-display-"+H);t.innerHTML=A;s.display=t;s.appendChild(t)}if(E.menu){E.menu.centerMenuItems()}if(E.tabOverflowMenu){E.tabOverflowMenu.centerMenuItems();E.tabOverflowMenu.initSelected()}},highlightAction:function(c,e){var b,d,a=c.actionBar.visibleTabs;for(b=0;b<a.length;b++){d=a[b];if(d!=c){bb.actionBar.unhighlightAction(d)}}if(c.actionBar.tabOverlowMenu){a=c.actionBar.tabOverflowMenu.actions;for(b=0;b<a.length;b++){d=a[b];if(d!=e){bb.actionBar.unhighlightAction(d)}}}c.style["border-top-color"]=bb.options.highlightColor;c.setAttribute("class",c.highlight);if(e){e.setAttribute("class",e.normal+" bb10Highlight")}if(c.actionBar.tabOverflowMenu&&!e){if(c.actionBar.tabOverflowBtn&&(c==c.actionBar.tabOverflowBtn)){e.setAttribute("class",e.normal+" bb10Highlight")}else{a=c.actionBar.tabOverflowMenu.actions;for(b=0;b<a.length;b++){d=a[b];if(d.visibleTab==c){d.setAttribute("class",d.normal+" bb10Highlight")}}}}if(c.actionBar.tabOverflowBtn&&c.actionBar.tabOverflowBtn.reset){c.actionBar.tabOverflowBtn.reset()}},unhighlightAction:function(a){var b;a.style["border-top-color"]="";a.setAttribute("class",a.normal);if(a.actionBar&&a.actionBar.tabOverflowMenu){tabs=a.actionBar.tabOverflowMenu.actions;for(i=0;i<tabs.length;i++){b=tabs[i];b.setAttribute("class",b.normal)}}}};_bb_PlayBook_10_scrollPanel={apply:function(g){var c,a,d,b,f,e;for(c=0;c<g.length;c++){d=g[c];e=[];f=document.createElement("div");d.appendChild(f);for(a=0;a<d.childNodes.length-1;a++){e.push(d.childNodes[a])}for(a=0;a<e.length-1;a++){f.appendChild(e[a])}if(bb.device.isPlayBook){d.scroller=new iScroll(d,{vScrollbar:true,hideScrollbar:true,fadeScrollbar:true,onBeforeScrollStart:function(h){if(bb.scroller){bb.scroller.disable()}h.preventDefault()},onBeforeScrollEnd:function(h){if(bb.scroller){bb.scroller.enable()}},onScrollMove:function(h){if(d.onscroll){d.onscroll(h)}}})}else{d.scroller=null;d.style["-webkit-overflow-scrolling"]="-blackberry-touch"}d.refresh=function(){if(this.scroller){this.scroller.refresh()}};d.refresh=d.refresh.bind(d);setTimeout(d.refresh,0);d.scrollTo=function(h,j){if(this.scroller){this.scroller.scrollTo(h,j)}else{this.scrollTop=h}};d.scrollTo=d.scrollTo.bind(d);d.scrollToElement=function(h){if(this.scroller){this.scroller.scrollToElement(h)}else{if(!h){return}this.scrollTo(h.offsetTop,0)}};d.scrollToElement=d.scrollToElement.bind(d);d.setAttribute("class","bb-scroll-panel")}}};bb.tabOverflow={create:function(a){var c=document.createElement("div"),b;c.screen=a;c.itemClicked=false;c.visible=false;c.actions=[];c.tabOverflowState={display:undefined,img:undefined,style:undefined,caption:undefined};c.res=(bb.device.isPlayBook)?"lowres":"hires";c.setAttribute("class","bb-bb10-tab-overflow-menu bb-bb10-tab-overflow-menu-"+bb.actionBar.color);a.parentNode.appendChild(c);if(!bb.screen.tabOverlay){b=document.createElement("div");b.menu=c;bb.screen.tabOverlay=b;b.setAttribute("class","bb-bb10-tab-overflow-menu-overlay ");a.appendChild(b);b.ontouchstart=function(){this.menu.hide()}}c.overlay=bb.screen.tabOverlay;c.show=function(){this.itemClicked=false;this.visible=true;var d=this.actionBar.tabOverflowBtn;this.tabOverflowState.display=d.tabHighlight.style.display;this.tabOverflowState.img=d.icon.src;this.tabOverflowState.caption=d.display.innerHTML;this.tabOverflowState.style=d.icon.getAttribute("class");this.setDimensions();d.reset()};c.show=c.show.bind(c);c.setDimensions=function(){var d=(bb.device.isPlayBook)?bb.innerWidth()-77:bb.innerWidth()-154;this.screen.parentNode.style.position="absolute";this.screen.parentNode.style.left="0px";this.screen.parentNode.style.top="0px";this.screen.parentNode.style.bottom="0px";this.screen.parentNode.style.right="0px";this.screen.parentNode.style.width="100%";this.screen.parentNode.style.overflow="hidden";this.overlay.style.display="block";this.style.width=d+"px";this.style["-webkit-transition"]="all 0.2s ease-out";this.style["-webkit-backface-visibility"]="hidden";this.screen.style.left=d+"px";this.screen.style.right="-"+d+"px";this.screen.style["-webkit-transition"]="all 0.2s ease-out";this.screen.style["-webkit-backface-visibility"]="hidden"};c.setDimensions=c.setDimensions.bind(c);c.hide=function(){this.visible=false;this.style.width="0px";this.screen.style.left="0px";this.screen.style.right="0px";this.overlay.style.display="none";if(!this.itemClicked){var d=this.actionBar.tabOverflowBtn;d.icon.setAttribute("src",this.tabOverflowState.img);d.icon.setAttribute("class",this.tabOverflowState.style);d.tabHighlight.style.display=this.tabOverflowState.display;d.display.innerHTML=this.tabOverflowState.caption}};c.hide=c.hide.bind(c);c.onclick=function(){this.hide()};c.centerMenuItems=function(){var f=bb.innerHeight(),e=(bb.device.isPlayBook)?53:111,d;d=f-Math.floor(f/2)-Math.floor((this.actions.length*e)/2)-e;this.actions[0].style["margin-top"]=d+"px"};c.centerMenuItems=c.centerMenuItems.bind(c);c.initSelected=function(){var d,e;for(d=0;d<this.actions.length;d++){e=this.actions[d];if(e.initialSelected){e.setOverflowTab(true);break}}};c.initSelected=c.initSelected.bind(c);c.orientationChanged=function(d){this.centerMenuItems();if(this.visible){this.setDimensions()}};c.orientationChanged=c.orientationChanged.bind(c);window.addEventListener("orientationchange",c.orientationChanged,false);c.add=function(e){var g,m=e.innerHTML,j=e.getAttribute("data-bb-accent-text"),n=document.createElement("div"),k="bb-bb10-tab-overflow-menu-item-inner-"+this.res,f=document.createElement("img"),l,h,d;g="bb-bb10-tab-overflow-menu-item-"+this.res+" bb-bb10-tab-overflow-menu-item-"+this.res+"-"+bb.actionBar.color;this.appendChild(e);this.actions.push(e);if(this.actions.length==1){g=g+" bb-bb10-tab-overflow-menu-item-first-"+this.res+"-"+bb.actionBar.color}e.normal=g;e.accentText=null;e.menu=this;e.caption=m;e.setAttribute("class",e.normal);e.innerHTML="";if(!e.visibleTab){e.visibleTab=e.actionBar.tabOverflowBtn}l=document.createElement("table");h=document.createElement("tr");l.appendChild(h);e.appendChild(l);d=document.createElement("td");f.setAttribute("src",e.getAttribute("data-bb-img"));f.setAttribute("class","bb-bb10-tab-overflow-menu-item-image-"+this.res);e.img=f;d.appendChild(f);h.appendChild(d);d=document.createElement("td");n.innerHTML=m;e.display=n;d.appendChild(n);if(j){e.accentText=document.createElement("div");e.accentText.innerHTML=j;e.accentText.setAttribute("class","tab-accent-text");d.appendChild(e.accentText);k=k+" bb-bb10-tab-overflow-menu-item-double-"+this.res}else{k=k+" bb-bb10-tab-overflow-menu-item-single-"+this.res}n.setAttribute("class",k);h.appendChild(d);e.setOverflowTab=function(p){var o=this.actionBar.tabOverflowBtn;if(p){bb.actionBar.highlightAction(this.visibleTab,this)}if(this.visibleTab==o){o.icon.setAttribute("src",this.img.src);o.icon.setAttribute("class",o.icon.highlight);o.tabHighlight.style.display="block";o.display.innerHTML=this.caption}};e.setOverflowTab=e.setOverflowTab.bind(e);e.initialSelected=(e.hasAttribute("data-bb-selected")&&(e.getAttribute("data-bb-selected").toLowerCase()=="true"));e.oldClick=e.onclick;e.onclick=function(){var o=this.actionBar.tabOverflowBtn;this.menu.itemClicked=true;bb.actionBar.highlightAction(this.visibleTab,this);if(this.visibleTab==o){this.setOverflowTab(false)}if(this.oldClick){this.oldClick()}};e.setCaption=function(o){this.display.innerHTML=o};e.setCaption=e.setCaption.bind(e);e.setImage=function(o){this.img.setAttribute("src",o)};e.setImage=e.setImage.bind(e)};c.add=c.add.bind(c);return c}},bb.contextMenu={create:function(a){var b,d;if(bb.device.isPlayBook){b="lowres";d=100}else{b="hires";d=300}var f=document.createElement("div"),e=document.createElement("div"),c=document.createElement("div"),g;f.setAttribute("class","bb-bb10-context-menu bb-bb10-context-menu-"+b+"-"+bb.actionBar.color);f.actions=[];f.hideEvents=[];f.res=b;f.threshold=d;f.visible=false;f.overlay=document.createElement("div");f.overlay.threshold=d;f.overlay.setAttribute("class","bb-bb10-context-menu-overlay");f.overlay.menu=f;a.appendChild(f.overlay);f.overlay.ontouchmove=function(h){if(!this.menu.peeking){return}var j=h.touches[0];if(this.startPos&&(this.startPos-j.pageX>this.threshold)){this.menu.show(this.menu.selected);this.closeMenu=false}};f.overlay.ontouchend=function(){if(this.closeMenu){this.menu.hide()}};f.overlay.ontouchstart=function(h){this.closeMenu=true;if(!this.menu.peeking){return}var j=h.touches[0];this.startPos=j.pageX;h.preventDefault()};g=document.createElement("div");g.setAttribute("class","bb-bb10-context-menu-item-"+b+" bb-bb10-context-menu-header-"+bb.actionBar.color);f.header=g;f.appendChild(g);e.setAttribute("class","bb-bb10-context-menu-header-title-"+b+" bb-bb10-context-menu-header-title-"+bb.actionBar.color);e.style.width=bb.contextMenu.getWidth()-20+"px";f.topTitle=e;g.appendChild(e);c.setAttribute("class","bb-bb10-context-menu-header-description-"+b);c.style.width=bb.contextMenu.getWidth()-20+"px";f.description=c;g.appendChild(c);f.style.left=bb.contextMenu.getLeft();f.show=function(h){if(h){this.header.style.display="";this.header.style.visibility="";if(h.title){this.topTitle.innerHTML=h.title}if(h.description){this.description.innerHTML=h.description}this.selected=h}else{this.header.style.display="none";this.selected=undefined}this.peeking=false;this.overlay.style.display="inline";this.style["-webkit-transition"]="all 0.3s ease-in-out";this.style["-webkit-transform"]="translate(-"+bb.contextMenu.getWidth()+"px, 0)";this.addEventListener("touchstart",this.touchHandler,false);this.header.addEventListener("click",this.hide,false);this.style.visibility="visible";this.visible=true};f.show=f.show.bind(f);f.hide=function(){this.overlay.style.display="none";this.removeEventListener("touchstart",this.touchHandler,false);this.removeEventListener("touchmove",this.touchMoveHandler,false);this.style["-webkit-transition"]="all 0.5s ease-in-out";this.style["-webkit-transform"]="translate("+bb.contextMenu.getWidth()+"px, 0px)";if(!this.peeking){this.header.removeEventListener("click",this.hide,false)}this.peeking=false;this.visible=false;for(var h=f.hideEvents.length-1;h>=0;h--){f.hideEvents[h]();f.hideEvents.pop()}};f.hide=f.hide.bind(f);f.peek=function(h){if(h){this.header.style.display="";if(h.title){this.topTitle.innerHTML=h.title}if(h.description){this.description.innerHTML=h.description}this.selected=h}this.header.style.visibility="hidden";this.header.style["margin-bottom"]="-"+Math.floor(this.header.offsetHeight/2)+"px";this.peeking=true;this.overlay.style.display="inline";this.style["-webkit-transition"]="all 0.3s ease-in-out";this.style["-webkit-transform"]="translate(-"+bb.contextMenu.getPeekWidth()+", 0)";this.addEventListener("touchstart",this.touchHandler,false);this.addEventListener("touchmove",this.touchMoveHandler,false);this.header.removeEventListener("click",this.hide,false);this.style.visibility="visible";this.visible=true};f.peek=f.peek.bind(f);f.touchHandler=function(h){if(this.peeking){var j=h.touches[0];this.startPos=j.pageX;if(h.target==this){}else{if(h.target.parentNode==this&&h.target!=this.header){h.preventDefault();h.stopPropagation()}}}else{if(h.target==this){this.hide()}}};f.touchHandler=f.touchHandler.bind(f);f.touchMoveHandler=function(h){if(!this.peeking){return}var j=h.touches[0];if(this.startPos&&(this.startPos-j.pageX>this.threshold)){this.show(this.selected)}};f.touchMoveHandler=f.touchMoveHandler.bind(f);f.onclick=function(h){if(this.peeking){this.show(this.selected);h.stopPropagation()}};f.centerMenuItems=function(){var l=bb.innerHeight(),k=(bb.device.isPlayBook)?53:111,h,j;j=(this.pinnedAction)?this.actions.length-1:this.actions.length;h=l-Math.floor(l/2)-Math.floor((j*k)/2)-k;this.actions[0].style["margin-top"]=h+"px"};f.centerMenuItems=f.centerMenuItems.bind(f);f.orientationChanged=function(h){this.style["-webkit-transition"]="";this.style.left=bb.innerWidth()+"px";this.style.height=bb.innerHeight()+"px";this.centerMenuItems()};f.orientationChanged=f.orientationChanged.bind(f);window.addEventListener("orientationchange",f.orientationChanged,false);f.addEventListener("webkitTransitionEnd",function(){if(!this.visible){this.style.visibility="hidden"}});f.add=function(n){var o,l,k=n.innerHTML,m=false;o="bb-bb10-context-menu-item-"+this.res+" bb-bb10-context-menu-item-"+this.res+"-"+bb.actionBar.color;this.appendChild(n);this.actions.push(n);m=(n.hasAttribute("data-bb-pin")&&n.getAttribute("data-bb-pin").toLowerCase()=="true");if(m&&!this.pinnedAction){o=o+" bb-bb10-context-menu-item-first-"+this.res+"-"+bb.actionBar.color;n.style.bottom="-2px";n.style.position="absolute";n.style.width="100%";this.pinnedAction=n}if(this.actions.length==1){o=o+" bb-bb10-context-menu-item-first-"+this.res+"-"+bb.actionBar.color}l=o+" bb-bb10-context-menu-item-hover-"+this.res;n.normal=o;n.highlight=l;n.innerHTML="";var j=document.createElement("div"),h=document.createElement("img");h.setAttribute("src",n.getAttribute("data-bb-img"));h.setAttribute("class","bb-bb10-context-menu-item-image-"+this.res);n.img=h;n.appendChild(h);j.setAttribute("class","bb-bb10-context-menu-item-inner-"+this.res);n.appendChild(j);j.innerHTML=k;n.display=j;n.setAttribute("class",o);n.ontouchstart=function(){this.setAttribute("class",this.highlight);this.style["border-left-color"]=bb.options.highlightColor};n.ontouchend=function(){this.setAttribute("class",this.normal);this.style["border-left-color"]="transparent"};n.addEventListener("click",this.hide,false);n.setCaption=function(p){this.display.innerHTML=p};n.setCaption=n.setCaption.bind(n);n.setImage=function(p){this.img.setAttribute("src",p)};n.setImage=n.setImage.bind(n)};f.add=f.add.bind(f);return f},getWidth:function(){if(bb.device.isPlayBook){return"300"}else{return"563"}},getPeekWidth:function(){if(bb.device.isPlayBook){return"55px"}else{return"121px"}},getLeft:function(){return window.innerWidth+3+"px"}};_bb10_textInput={apply:function(e){var c=(bb.device.isPlayBook)?"lowres":"hires",b,d,a;for(b=0;b<e.length;b++){d=e[b];a="";if(d.hasAttribute("class")){a=d.getAttribute("class")}d.normal=a+" bb-bb10-input bb-bb10-input-"+c;d.focused=a+" bb-bb10-input-focused bb-bb10-input-focused-"+c+" bb-bb10-input-"+c;d.setAttribute("class",d.normal);d.isFocused=false;d.clickCount=0;d.addEventListener("focus",function(){if(this.readOnly==false){this.setAttribute("class",this.focused);this.style["border-color"]=bb.options.highlightColor;this.isFocused=true;this.clickCount=0}},false);d.addEventListener("blur",function(){this.setAttribute("class",this.normal);this.style["border-color"]="";this.isFocused=false;this.removeEventListener("click",d.handleDeleteClick,false)},false);d.addEventListener("click",function(f){if(this.clickCount==0){this.clickCount++;return}if(f.target==this&&this.isFocused){var g=false;if(bb.device.isPlayBook&&f.clientX>(this.clientWidth-40)&&this.readOnly==false){g=true}else{if(f.clientX>(this.clientWidth-45)&&this.readOnly==false){g=true}}if(g){this.value=""}}},false)}}};_bbPlayBook_textInput={apply:function(d){var b,c,a;for(b=0;b<d.length;b++){c=d[b];a="";if(c.hasAttribute("class")){a=c.getAttribute("class")}c.normal=a+" bb-pb-input";c.focused=a+" bb-pb-input-focused bb-pb-input";c.setAttribute("class",c.normal);c.isFocused=false;c.clickCount=0;c.addEventListener("focus",function(){if(this.readOnly==false){this.setAttribute("class",this.focused);this.isFocused=true;this.clickCount=0}},false);c.addEventListener("blur",function(){this.setAttribute("class",this.normal);this.isFocused=false;this.removeEventListener("click",c.handleDeleteClick,false)},false);c.addEventListener("click",function(e){if(this.clickCount==0){this.clickCount++;return}if(e.target==this&&this.isFocused){var f=false;if(e.clientX>(this.clientWidth-40)&&this.readOnly==false){f=true}if(f){this.value=""}}},false)}}};_bb_6_7_textInput={apply:function(d){for(var a=0;a<d.length;a++){var c=d[a];var b=c.getAttribute("class");b=b+" bb-bb7-input";if(bb.device.isHiRes){b=b+" bb-bb7-input-hires"}else{b=b+" bb-bb7-input-lowres"}c.setAttribute("class",b)}}};
/*!
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var s=Math,d=function(m){return m>>0},w=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":(/trident/i).test(navigator.userAgent)?"ms":"opera" in window?"O":"",x=(/android/gi).test(navigator.appVersion),j=(/iphone|ipad/gi).test(navigator.appVersion),c=(/playbook/gi).test(navigator.appVersion),o=(/hp-tablet/gi).test(navigator.appVersion),l="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),v="ontouchstart" in window&&!o,f=w+"Transform" in document.documentElement.style,g=j||c,p=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),n=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),h="onorientationchange" in window?"orientationchange":"resize",b=v?"touchstart":"mousedown",q=v?"touchmove":"mousemove",e=v?"touchend":"mouseup",u=v?"touchcancel":"mouseup",r=w=="Moz"?"DOMMouseScroll":"mousewheel",a="translate"+(l?"3d(":"("),k=l?",0)":")",t=function(z,m){var A=this,B=document,y;A.wrapper=typeof z=="object"?z:B.getElementById(z);A.wrapper.style.overflow="hidden";A.scroller=A.wrapper.children[0];A.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:x,hideScrollbar:j,fadeScrollbar:j&&l,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(C){C.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(y in m){A.options[y]=m[y]}A.x=A.options.x;A.y=A.options.y;A.options.useTransform=f?A.options.useTransform:false;A.options.hScrollbar=A.options.hScroll&&A.options.hScrollbar;A.options.vScrollbar=A.options.vScroll&&A.options.vScrollbar;A.options.zoom=A.options.useTransform&&A.options.zoom;A.options.useTransition=g&&A.options.useTransition;if(A.options.zoom&&x){a="translate(";k=")"}A.scroller.style[w+"TransitionProperty"]=A.options.useTransform?"-"+w.toLowerCase()+"-transform":"top left";A.scroller.style[w+"TransitionDuration"]="0";A.scroller.style[w+"TransformOrigin"]="0 0";if(A.options.useTransition){A.scroller.style[w+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(A.options.useTransform){A.scroller.style[w+"Transform"]=a+A.x+"px,"+A.y+"px"+k}else{A.scroller.style.cssText+=";position:absolute;top:"+A.y+"px;left:"+A.x+"px"}if(A.options.useTransition){A.options.fixedScrollbar=true}A.refresh();A._bind(h,window);A._bind(b);if(!v){A._bind("mouseout",A.wrapper);if(A.options.wheelAction!="none"){A._bind(r)}}if(A.options.checkDOMChanges){A.checkDOMTime=setInterval(function(){A._checkDOMChanges()},500)}};t.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(y){var m=this;switch(y.type){case b:if(!v&&y.button!==0){return}m._start(y);break;case q:m._move(y);break;case e:case u:m._end(y);break;case h:m._resize();break;case r:m._wheel(y);break;case"mouseout":m._mouseout(y);break;case"webkitTransitionEnd":m._transitionEnd(y);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var z=this,A=document,y;if(!z[m+"Scrollbar"]){if(z[m+"ScrollbarWrapper"]){if(f){z[m+"ScrollbarIndicator"].style[w+"Transform"]=""}z[m+"ScrollbarWrapper"].parentNode.removeChild(z[m+"ScrollbarWrapper"]);z[m+"ScrollbarWrapper"]=null;z[m+"ScrollbarIndicator"]=null}return}if(!z[m+"ScrollbarWrapper"]){y=A.createElement("div");if(z.options.scrollbarClass){y.className=z.options.scrollbarClass+m.toUpperCase()}else{y.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(z.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(z.hScrollbar?"7":"2")+"px;top:2px;right:1px")}y.style.cssText+=";pointer-events:none;-"+w+"-transition-property:opacity;-"+w+"-transition-duration:"+(z.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(z.options.hideScrollbar?"0":"1");z.wrapper.appendChild(y);z[m+"ScrollbarWrapper"]=y;y=A.createElement("div");if(!z.options.scrollbarClass){y.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.9);-"+w+"-background-clip:padding-box;-"+w+"-box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";-"+w+"-border-radius:3px;border-radius:3px"}y.style.cssText+=";pointer-events:none;-"+w+"-transition-property:-"+w+"-transform;-"+w+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+w+"-transition-duration:0;-"+w+"-transform:"+a+"0,0"+k;if(z.options.useTransition){y.style.cssText+=";-"+w+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}z[m+"ScrollbarWrapper"].appendChild(y);z[m+"ScrollbarIndicator"]=y}if(m=="h"){z.hScrollbarSize=z.hScrollbarWrapper.clientWidth;z.hScrollbarIndicatorSize=s.max(d(z.hScrollbarSize*z.hScrollbarSize/z.scrollerW),8);z.hScrollbarIndicator.style.width=z.hScrollbarIndicatorSize+"px";z.hScrollbarMaxScroll=z.hScrollbarSize-z.hScrollbarIndicatorSize;z.hScrollbarProp=z.hScrollbarMaxScroll/z.maxScrollX}else{z.vScrollbarSize=z.vScrollbarWrapper.clientHeight;z.vScrollbarIndicatorSize=s.max(d(z.vScrollbarSize*z.vScrollbarSize/z.scrollerH),8);z.vScrollbarIndicator.style.height=z.vScrollbarIndicatorSize+"px";z.vScrollbarMaxScroll=z.vScrollbarSize-z.vScrollbarIndicatorSize;z.vScrollbarProp=z.vScrollbarMaxScroll/z.maxScrollY}z._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},x?200:0)},_pos:function(m,z){m=this.hScroll?m:0;z=this.vScroll?z:0;if(this.options.useTransform){this.scroller.style[w+"Transform"]=a+m+"px,"+z+"px"+k+" scale("+this.scale+")"}else{m=d(m);z=d(z);this.scroller.style.left=m+"px";this.scroller.style.top=z+"px"}this.x=m;this.y=z;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,A){var z=this,B=m=="h"?z.x:z.y,y;if(!z[m+"Scrollbar"]){return}B=z[m+"ScrollbarProp"]*B;if(B<0){if(!z.options.fixedScrollbar){y=z[m+"ScrollbarIndicatorSize"]+d(B*3);if(y<8){y=8}z[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=y+"px"}B=0}else{if(B>z[m+"ScrollbarMaxScroll"]){if(!z.options.fixedScrollbar){y=z[m+"ScrollbarIndicatorSize"]-d((B-z[m+"ScrollbarMaxScroll"])*3);if(y<8){y=8}z[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=y+"px";B=z[m+"ScrollbarMaxScroll"]+(z[m+"ScrollbarIndicatorSize"]-y)}else{B=z[m+"ScrollbarMaxScroll"]}}}z[m+"ScrollbarWrapper"].style[w+"TransitionDelay"]="0";z[m+"ScrollbarWrapper"].style.opacity=A&&z.options.hideScrollbar?"0":"1";z[m+"ScrollbarIndicator"].style[w+"Transform"]=a+(m=="h"?B+"px,0":"0,"+B+"px")+k},_start:function(E){var D=this,z=v?E.touches[0]:E,A,m,F,C,B;if(!D.enabled){return}if(D.options.onBeforeScrollStart){D.options.onBeforeScrollStart.call(D,E)}if(D.options.useTransition||D.options.zoom){D._transitionTime(0)}D.moved=false;D.animating=false;D.zoomed=false;D.distX=0;D.distY=0;D.absDistX=0;D.absDistY=0;D.dirX=0;D.dirY=0;if(D.options.zoom&&v&&E.touches.length>1){C=s.abs(E.touches[0].pageX-E.touches[1].pageX);B=s.abs(E.touches[0].pageY-E.touches[1].pageY);D.touchesDistStart=s.sqrt(C*C+B*B);D.originX=s.abs(E.touches[0].pageX+E.touches[1].pageX-D.wrapperOffsetLeft*2)/2-D.x;D.originY=s.abs(E.touches[0].pageY+E.touches[1].pageY-D.wrapperOffsetTop*2)/2-D.y;if(D.options.onZoomStart){D.options.onZoomStart.call(D,E)}}if(D.options.momentum){if(D.options.useTransform){A=getComputedStyle(D.scroller,null)[w+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=A[4]*1;F=A[5]*1}else{m=getComputedStyle(D.scroller,null).left.replace(/[^0-9-]/g,"")*1;F=getComputedStyle(D.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=D.x||F!=D.y){if(D.options.useTransition){D._unbind("webkitTransitionEnd")}else{n(D.aniTime)}D.steps=[];D._pos(m,F)}}D.absStartX=D.x;D.absStartY=D.y;D.startX=D.x;D.startY=D.y;D.pointX=z.pageX;D.pointY=z.pageY;D.startTime=E.timeStamp||Date.now();if(D.options.onScrollStart){D.options.onScrollStart.call(D,E)}D._bind(q);D._bind(e);D._bind(u)},_move:function(F){var D=this,G=v?F.touches[0]:F,B=G.pageX-D.pointX,z=G.pageY-D.pointY,m=D.x+B,H=D.y+z,C,A,y,E=F.timeStamp||Date.now();if(D.options.onBeforeScrollMove){D.options.onBeforeScrollMove.call(D,F)}if(D.options.zoom&&v&&F.touches.length>1){C=s.abs(F.touches[0].pageX-F.touches[1].pageX);A=s.abs(F.touches[0].pageY-F.touches[1].pageY);D.touchesDist=s.sqrt(C*C+A*A);D.zoomed=true;y=1/D.touchesDistStart*D.touchesDist*this.scale;if(y<D.options.zoomMin){y=0.5*D.options.zoomMin*Math.pow(2,y/D.options.zoomMin)}else{if(y>D.options.zoomMax){y=2*D.options.zoomMax*Math.pow(0.5,D.options.zoomMax/y)}}D.lastScale=y/this.scale;m=this.originX-this.originX*D.lastScale+this.x,H=this.originY-this.originY*D.lastScale+this.y;this.scroller.style[w+"Transform"]=a+m+"px,"+H+"px"+k+" scale("+y+")";if(D.options.onZoom){D.options.onZoom.call(D,F)}return}D.pointX=G.pageX;D.pointY=G.pageY;if(m>0||m<D.maxScrollX){m=D.options.bounce?D.x+(B/2):m>=0||D.maxScrollX>=0?0:D.maxScrollX}if(H>D.minScrollY||H<D.maxScrollY){H=D.options.bounce?D.y+(z/2):H>=D.minScrollY||D.maxScrollY>=0?D.minScrollY:D.maxScrollY}D.distX+=B;D.distY+=z;D.absDistX=s.abs(D.distX);D.absDistY=s.abs(D.distY);if(D.absDistX<6&&D.absDistY<6){return}if(D.options.lockDirection){if(D.absDistX>D.absDistY+5){H=D.y;z=0}else{if(D.absDistY>D.absDistX+5){m=D.x;B=0}}}D.moved=true;D._pos(m,H);D.dirX=B>0?-1:B<0?1:0;D.dirY=z>0?-1:z<0?1:0;if(E-D.startTime>300){D.startTime=E;D.startX=D.x;D.startY=D.y}if(D.options.onScrollMove){D.options.onScrollMove.call(D,F)}},_end:function(F){if(v&&F.touches.length!=0){return}var D=this,L=v?F.changedTouches[0]:F,G,K,z={dist:0,time:0},m={dist:0,time:0},C=(F.timeStamp||Date.now())-D.startTime,H=D.x,E=D.y,J,I,y,B,A;D._unbind(q);D._unbind(e);D._unbind(u);if(D.options.onBeforeScrollEnd){D.options.onBeforeScrollEnd.call(D,F)}if(D.zoomed){A=D.scale*D.lastScale;A=Math.max(D.options.zoomMin,A);A=Math.min(D.options.zoomMax,A);D.lastScale=A/D.scale;D.scale=A;D.x=D.originX-D.originX*D.lastScale+D.x;D.y=D.originY-D.originY*D.lastScale+D.y;D.scroller.style[w+"TransitionDuration"]="200ms";D.scroller.style[w+"Transform"]=a+D.x+"px,"+D.y+"px"+k+" scale("+D.scale+")";D.zoomed=false;D.refresh();if(D.options.onZoomEnd){D.options.onZoomEnd.call(D,F)}return}if(!D.moved){if(v){if(D.doubleTapTimer&&D.options.zoom){clearTimeout(D.doubleTapTimer);D.doubleTapTimer=null;if(D.options.onZoomStart){D.options.onZoomStart.call(D,F)}D.zoom(D.pointX,D.pointY,D.scale==1?D.options.doubleTapZoom:1);if(D.options.onZoomEnd){setTimeout(function(){D.options.onZoomEnd.call(D,F)},200)}}else{D.doubleTapTimer=setTimeout(function(){D.doubleTapTimer=null;G=L.target;while(G.nodeType!=1){G=G.parentNode}if(G.tagName!="SELECT"&&G.tagName!="INPUT"&&G.tagName!="TEXTAREA"){K=document.createEvent("MouseEvents");K.initMouseEvent("click",true,true,F.view,1,L.screenX,L.screenY,L.clientX,L.clientY,F.ctrlKey,F.altKey,F.shiftKey,F.metaKey,0,null);K._fake=true;G.dispatchEvent(K)}},D.options.zoom?250:0)}}D._resetPos(200);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}if(C<300&&D.options.momentum){z=H?D._momentum(H-D.startX,C,-D.x,D.scrollerW-D.wrapperW+D.x,D.options.bounce?D.wrapperW:0):z;m=E?D._momentum(E-D.startY,C,-D.y,(D.maxScrollY<0?D.scrollerH-D.wrapperH+D.y-D.minScrollY:0),D.options.bounce?D.wrapperH:0):m;H=D.x+z.dist;E=D.y+m.dist;if((D.x>0&&H>0)||(D.x<D.maxScrollX&&H<D.maxScrollX)){z={dist:0,time:0}}if((D.y>D.minScrollY&&E>D.minScrollY)||(D.y<D.maxScrollY&&E<D.maxScrollY)){m={dist:0,time:0}}}if(z.dist||m.dist){y=s.max(s.max(z.time,m.time),10);if(D.options.snap){J=H-D.absStartX;I=E-D.absStartY;if(s.abs(J)<D.options.snapThreshold&&s.abs(I)<D.options.snapThreshold){D.scrollTo(D.absStartX,D.absStartY,200)}else{B=D._snap(H,E);H=B.x;E=B.y;y=s.max(B.time,y)}}D.scrollTo(d(H),d(E),y);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}if(D.options.snap){J=H-D.absStartX;I=E-D.absStartY;if(s.abs(J)<D.options.snapThreshold&&s.abs(I)<D.options.snapThreshold){D.scrollTo(D.absStartX,D.absStartY,200)}else{B=D._snap(D.x,D.y);if(B.x!=D.x||B.y!=D.y){D.scrollTo(B.x,B.y,B.time)}}if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}return}D._resetPos(200);if(D.options.onTouchEnd){D.options.onTouchEnd.call(D,F)}},_resetPos:function(z){var m=this,A=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,y=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(A==m.x&&y==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(w=="webkit"){m.hScrollbarWrapper.style[w+"TransitionDelay"]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(w=="webkit"){m.vScrollbarWrapper.style[w+"TransitionDelay"]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(A,y,z||0)},_wheel:function(C){var A=this,B,z,y,m,D;if("wheelDeltaX" in C){B=C.wheelDeltaX/12;z=C.wheelDeltaY/12}else{if("wheelDelta" in C){B=z=C.wheelDelta/12}else{if("detail" in C){B=z=-C.detail*3}else{return}}}if(A.options.wheelAction=="zoom"){D=A.scale*Math.pow(2,1/3*(z?z/Math.abs(z):0));if(D<A.options.zoomMin){D=A.options.zoomMin}if(D>A.options.zoomMax){D=A.options.zoomMax}if(D!=A.scale){if(!A.wheelZoomCount&&A.options.onZoomStart){A.options.onZoomStart.call(A,C)}A.wheelZoomCount++;A.zoom(C.pageX,C.pageY,D,400);setTimeout(function(){A.wheelZoomCount--;if(!A.wheelZoomCount&&A.options.onZoomEnd){A.options.onZoomEnd.call(A,C)}},400)}return}y=A.x+B;m=A.y+z;if(y>0){y=0}else{if(y<A.maxScrollX){y=A.maxScrollX}}if(m>A.minScrollY){m=A.minScrollY}else{if(m<A.maxScrollY){m=A.maxScrollY}}A.scrollTo(y,m,0)},_mouseout:function(y){var m=y.relatedTarget;if(!m){this._end(y);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(y)},_transitionEnd:function(y){var m=this;if(y.target!=m.scroller){return}m._unbind("webkitTransitionEnd");m._startAni()},_startAni:function(){var D=this,y=D.x,m=D.y,B=Date.now(),C,A,z;if(D.animating){return}if(!D.steps.length){D._resetPos(400);return}C=D.steps.shift();if(C.x==y&&C.y==m){C.time=0}D.animating=true;D.moved=true;if(D.options.useTransition){D._transitionTime(C.time);D._pos(C.x,C.y);D.animating=false;if(C.time){D._bind("webkitTransitionEnd")}else{D._resetPos(0)}return}z=function(){var E=Date.now(),G,F;if(E>=B+C.time){D._pos(C.x,C.y);D.animating=false;if(D.options.onAnimationEnd){D.options.onAnimationEnd.call(D)}D._startAni();return}E=(E-B)/C.time-1;A=s.sqrt(1-E*E);G=(C.x-y)*A+y;F=(C.y-m)*A+m;D._pos(G,F);if(D.animating){D.aniTime=p(z)}};z()},_transitionTime:function(m){m+="ms";this.scroller.style[w+"TransitionDuration"]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[w+"TransitionDuration"]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[w+"TransitionDuration"]=m}},_momentum:function(E,y,C,m,G){var D=0.0006,z=s.abs(E)/y,A=(z*z)/(2*D),F=0,B=0;if(E>0&&A>C){B=G/(6/(A/z*D));C=C+B;z=z*C/A;A=C}else{if(E<0&&A>m){B=G/(6/(A/z*D));m=m+B;z=z*m/A;A=m}}A=A*(E<0?-1:1);F=z/D;return{dist:A,time:d(F)}},_offset:function(m){var z=-m.offsetLeft,y=-m.offsetTop;while(m=m.offsetParent){z-=m.offsetLeft;y-=m.offsetTop}if(m!=this.wrapper){z*=this.scale;y*=this.scale}return{left:z,top:y}},_snap:function(G,F){var D=this,C,B,E,A,z,m;E=D.pagesX.length-1;for(C=0,B=D.pagesX.length;C<B;C++){if(G>=D.pagesX[C]){E=C;break}}if(E==D.currPageX&&E>0&&D.dirX<0){E--}G=D.pagesX[E];z=s.abs(G-D.pagesX[D.currPageX]);z=z?s.abs(D.x-G)/z*500:0;D.currPageX=E;E=D.pagesY.length-1;for(C=0;C<E;C++){if(F>=D.pagesY[C]){E=C;break}}if(E==D.currPageY&&E>0&&D.dirY<0){E--}F=D.pagesY[E];m=s.abs(F-D.pagesY[D.currPageY]);m=m?s.abs(D.y-F)/m*500:0;D.currPageY=E;A=d(s.max(z,m))||200;return{x:G,y:F,time:A}},_bind:function(z,y,m){(y||this.scroller).addEventListener(z,this,!!m)},_unbind:function(z,y,m){(y||this.scroller).removeEventListener(z,this,!!m)},destroy:function(){var m=this;m.scroller.style[w+"Transform"]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(h,window);m._unbind(b);m._unbind(q);m._unbind(e);m._unbind(u);if(!m.options.hasTouch){m._unbind("mouseout",m.wrapper);m._unbind(r)}if(m.options.useTransition){m._unbind("webkitTransitionEnd")}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var A=this,C,z,m,y,D=0,B=0;if(A.scale<A.options.zoomMin){A.scale=A.options.zoomMin}A.wrapperW=A.wrapper.clientWidth||1;A.wrapperH=A.wrapper.clientHeight||1;A.minScrollY=-A.options.topOffset||0;A.scrollerW=d(A.scroller.offsetWidth*A.scale);A.scrollerH=d((A.scroller.offsetHeight+A.minScrollY)*A.scale);A.maxScrollX=A.wrapperW-A.scrollerW;A.maxScrollY=A.wrapperH-A.scrollerH+A.minScrollY;A.dirX=0;A.dirY=0;if(A.options.onRefresh){A.options.onRefresh.call(A)}A.hScroll=A.options.hScroll&&A.maxScrollX<0;A.vScroll=A.options.vScroll&&(!A.options.bounceLock&&!A.hScroll||A.scrollerH>A.wrapperH);A.hScrollbar=A.hScroll&&A.options.hScrollbar;A.vScrollbar=A.vScroll&&A.options.vScrollbar&&A.scrollerH>A.wrapperH;C=A._offset(A.wrapper);A.wrapperOffsetLeft=-C.left;A.wrapperOffsetTop=-C.top;if(typeof A.options.snap=="string"){A.pagesX=[];A.pagesY=[];y=A.scroller.querySelectorAll(A.options.snap);for(z=0,m=y.length;z<m;z++){D=A._offset(y[z]);D.left+=A.wrapperOffsetLeft;D.top+=A.wrapperOffsetTop;A.pagesX[z]=D.left<A.maxScrollX?A.maxScrollX:D.left*A.scale;A.pagesY[z]=D.top<A.maxScrollY?A.maxScrollY:D.top*A.scale}}else{if(A.options.snap){A.pagesX=[];while(D>=A.maxScrollX){A.pagesX[B]=D;D=D-A.wrapperW;B++}if(A.maxScrollX%A.wrapperW){A.pagesX[A.pagesX.length]=A.maxScrollX-A.pagesX[A.pagesX.length-1]+A.pagesX[A.pagesX.length-1]}D=0;B=0;A.pagesY=[];while(D>=A.maxScrollY){A.pagesY[B]=D;D=D-A.wrapperH;B++}if(A.maxScrollY%A.wrapperH){A.pagesY[A.pagesY.length]=A.maxScrollY-A.pagesY[A.pagesY.length-1]+A.pagesY[A.pagesY.length-1]}}}A._scrollbar("h");A._scrollbar("v");if(!A.zoomed){A.scroller.style[w+"TransitionDuration"]="0";A._resetPos(200)}},scrollTo:function(m,F,E,D){var C=this,B=m,A,z;C.stop();if(!B.length){B=[{x:m,y:F,time:E,relative:D}]}for(A=0,z=B.length;A<z;A++){if(B[A].relative){B[A].x=C.x-B[A].x;B[A].y=C.y-B[A].y}C.steps.push({x:B[A].x,y:B[A].y,time:B[A].time||0})}C._startAni()},scrollToElement:function(m,z){var y=this,A;m=m.nodeType?m:y.scroller.querySelector(m);if(!m){return}A=y._offset(m);A.left+=y.wrapperOffsetLeft;A.top+=y.wrapperOffsetTop;A.left=A.left>0?0:A.left<y.maxScrollX?y.maxScrollX:A.left;A.top=A.top>y.minScrollY?y.minScrollY:A.top<y.maxScrollY?y.maxScrollY:A.top;z=z===undefined?s.max(s.abs(A.left)*2,s.abs(A.top)*2):z;y.scrollTo(A.left,A.top,z)},scrollToPage:function(A,z,C){var B=this,m,D;C=C===undefined?400:C;if(B.options.onScrollStart){B.options.onScrollStart.call(B)}if(B.options.snap){A=A=="next"?B.currPageX+1:A=="prev"?B.currPageX-1:A;z=z=="next"?B.currPageY+1:z=="prev"?B.currPageY-1:z;A=A<0?0:A>B.pagesX.length-1?B.pagesX.length-1:A;z=z<0?0:z>B.pagesY.length-1?B.pagesY.length-1:z;B.currPageX=A;B.currPageY=z;m=B.pagesX[A];D=B.pagesY[z]}else{m=-B.wrapperW*A;D=-B.wrapperH*z;if(m<B.maxScrollX){m=B.maxScrollX}if(D<B.maxScrollY){D=B.maxScrollY}}B.scrollTo(m,D,C)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(q);this._unbind(e);this._unbind(u)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind("webkitTransitionEnd")}else{n(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,D,C,B){var z=this,A=C/z.scale;if(!z.options.useTransform){return}z.zoomed=true;B=B===undefined?200:B;m=m-z.wrapperOffsetLeft-z.x;D=D-z.wrapperOffsetTop-z.y;z.x=m-m*A+z.x;z.y=D-D*A+z.y;z.scale=C;z.refresh();z.x=z.x>0?0:z.x<z.maxScrollX?z.maxScrollX:z.x;z.y=z.y>z.minScrollY?z.minScrollY:z.y<z.maxScrollY?z.maxScrollY:z.y;z.scroller.style[w+"TransitionDuration"]=B+"ms";z.scroller.style[w+"Transform"]=a+z.x+"px,"+z.y+"px"+k+" scale("+C+")";z.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined"){exports.iScroll=t}else{window.iScroll=t}})();